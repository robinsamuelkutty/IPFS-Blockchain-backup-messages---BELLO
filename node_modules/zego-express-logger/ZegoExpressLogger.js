((t,n)=>{if("object"==typeof exports&&"object"==typeof module)module.exports=n(require("protobufjs/minimal"),require("long"));else if("function"==typeof define&&define.amd)define(["protobufjs/minimal","long"],n);else{var i,r="object"==typeof exports?n(require("protobufjs/minimal"),require("long")):n(t["protobufjs/minimal"],t.long);for(i in r)("object"==typeof exports?exports:t)[i]=r[i]}})("undefined"!=typeof self?self:this,function(i,r){return o=[,function(t,n){t.exports=i},function(t,n){t.exports=r},function(U,t,n){n.r(t),n.d(t,"ZegoLogger",function(){return ze}),n.d(t,"ZegoDataReport",function(){return M}),n.d(t,"createZegoWebSocket",function(){return F}),n.d(t,"LoggerStateCenter",function(){return D});i.getInstance=function(){return i.instance||(i.instance=new i).u(),i.instance},i.prototype.u=function(){},Object.defineProperty(i.prototype,"testEnvironment",{get:function(){return this.h},set:function(t){this.h=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"ENV",{get:function(){return this.v},set:function(t){this.v=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"debug",{get:function(){return this._},set:function(t){this._=t},enumerable:!1,configurable:!0}),i.instance=new i;var o,N,e,D=i;function i(){this.h=!1,this.v=0,this._=!1}(t=f=f||{})[t.IE=0]="IE",t[t.FIREFOX=1]="FIREFOX",t[t.CHROME=2]="CHROME",t[t.SAFARI=3]="SAFARI",t[t.OPERA=4]="OPERA",t[t.WEIXIN=5]="WEIXIN",t[t.WEIXINMINI=6]="WEIXINMINI",t[t.UNKOWN=7]="UNKOWN",(f=o=o||{})[f.BROWSER=0]="BROWSER",f[f.WEIXINMINI=1]="WEIXINMINI",N=N||{},N[N.DEFAULT=0]="DEFAULT",(t=e=e||{})[t.DISABLE=0]="DISABLE",t[t.WEBSOCKET=1]="WEBSOCKET",t[t.HTTPS=2]="HTTPS";var s={DEBUG:0,INFO:1,WARN:2,ERROR:3,REPORT:99,DISABLE:100,debug:0,info:1,warn:2,error:3,report:99,disable:100},I=(0,L.prototype.init=function(){var n=this;this.g&&(this.readyState=0,this.g.onOpen(function(t){n.readyState=n.g.readyState,"function"==typeof n.onopen&&(n.onopen(t),n.g.onClose(function(t){n.readyState=n.g.readyState,"function"==typeof n.onclose&&n.onclose(t)}),n.g.onMessage(function(t){"function"==typeof n.onmessage&&n.onmessage(t)}))}),this.g.onError(function(t){n.readyState=n.g.readyState,"function"==typeof n.onerror&&n.onerror(t)}))},L.prototype.onopen=function(t){},L.prototype.onerror=function(t){},L.prototype.onclose=function(t){},L.prototype.onmessage=function(t){},L.prototype.send=function(t){this.g&&this.g.send({data:t})},L.prototype.close=function(){this.g&&this.g.close()},L);function L(t,n){this.url=t,this.readyState=3,this.init()}function F(t,n,i){return n%2===o.BROWSER?(n=t,(i=i)?i.createSocket(n,1):new WebSocket(n)):new I(t)}var P=function(){return(P=Object.assign||function(t){for(var n,i=1,r=arguments.length;i<r;i++)for(var e in n=arguments[i])Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t}).apply(this,arguments)},M=(r.prototype.newReport=function(t,n){this.dataStatistics[t]={event_time:Date.now(),time_consumed:0,seq:t,error:0,message:"success",event:n,events:[]}},r.prototype.addMsgExt=function(t,n){this.dataStatistics[t]?this.dataStatistics[t].msg_ext=n:console.warn("".concat(t," not exist"))},r.prototype.addMsgInfo=function(t,n){this.dataStatistics[t]?Object.assign(this.dataStatistics[t],n):console.warn("".concat(t," not exist"))},r.prototype.eventStart=function(t,n){this.dataStatistics[t]?null==this.dataStatistics[t].events?this.logger.warn("zd.es.0 no events"):this.dataStatistics[t].events.push({event:n,event_time:Date.now(),time_consumed:0}):this.logger.warn("zd.es.0 no seq match")},r.prototype.eventEnd=function(t,n,i){if(this.dataStatistics[t]){var r=this.dataStatistics[t].events;if(r&&0!==r.length){for(var e=r.length-1;0<=e;e--)if(r[e].event==n&&0==r[e].time_consumed){r[e].time_consumed=Date.now()-r[e].event_time;break}}else this.logger.info("zd.ee.0 no events")}else this.logger.info("zd.ee.0 no seq match")},r.prototype.eventEndWithMsg=function(t,n,i){if(this.dataStatistics[t]){var r=this.dataStatistics[t].events;if(r){for(var e=r.length-1;0<=e;e--)if(r[e].event==n&&0==r[e].time_consumed){r[e].time_consumed=Date.now()-r[e].event_time,null==r[e].msg_ext&&(r[e].msg_ext={}),r[e].msg_ext=P({},i);break}}else this.logger.warn("zd.ee.0 no events")}else this.logger.warn("zd.ee.0 no seq match")},r.prototype.eventEndWithMsgInfo=function(t,n,i){if(this.dataStatistics[t]){var r=this.dataStatistics[t].events;if(r){for(var e=r.length-1;0<=e;e--)if(r[e].event==n&&0==r[e].time_consumed){r[e].time_consumed=Date.now()-r[e].event_time,Object.assign(r[e],i);break}}else this.logger.warn("zd.ee.0 no events")}else this.logger.warn("zd.ee.0 no seq match")},r.prototype.addEventInfo=function(t,n,i,r){if(this.dataStatistics[t]){var e=this.dataStatistics[t].events;if(null==e)this.logger.warn("zd.aei.0 no events");else for(var o=e.length-1;0<=o;o--)if(e[o].event==n&&null!=e[o].time_consumed){null==e[o].msg_ext?e[o].msg_ext={}:e[o].msg_ext&&(e[o].msg_ext[i]=r);break}}else this.logger.warn("zd.aei.0 no seq match")},r.prototype.addEventMsg=function(t,n,i,r){if(this.dataStatistics[t]){var e=this.dataStatistics[t].events;if(null==e)this.logger.warn("zd.aem.0 no events");else for(var o=e.length-1;0<=o;o--)if(e[o].event==n){e[o][i]=r;break}}else this.logger.warn("zd.aem.0 no seq match")},r.prototype.addEvent=function(t,n,i){this.dataStatistics[t]?this.dataStatistics[t].events&&(i?this.dataStatistics[t].events.push({event:n,event_time:Date.now(),msg_ext:i}):this.dataStatistics[t].events.push({event:n,event_time:Date.now()})):this.logger.warn("zd.ae.0 no seq match")},r.prototype.uploadReport=function(t,n,i,r){var e=this.dataStatistics[t];null!=e&&(n&&(e.event=n),e.time_consumed=Date.now()-e.event_time,i&&this.addMsgInfo(t,{error:i.code,message:i.message||i.msg+" "+(r||"")}),this.logger.report(e),delete this.dataStatistics[t])},r);function r(t){this.dataStatistics={},this.logger=t}var z,C=["00","01","02","03","04","05","06","07","08","09"];function H(){var t=new Date;return[t.getFullYear()+"/",(C[t.getMonth()+1]||t.getMonth()+1)+"/",(C[t.getDate()]||t.getDate())+" ",(C[t.getHours()]||t.getHours())+":",(C[t.getMinutes()]||t.getMinutes())+":",C[t.getSeconds()]||t.getSeconds(),"."+t.getTime()%1e3].join("")}(f=z=z||{}).WEBSOCKET_STATE_CHANGE="zl.net.wsc",f.OPEN_WS="zl.net.opws";var a=n(1),t=n(2);(a=a.default||a).util.Long=t.default||t,a.util.Long.fromBits=a.util.Long.fromBits||function(){return 0};for(var l=a.roots,B=a.types?a.types.basic:{double:1,float:5,int32:0,uint32:0,sint32:0,fixed32:5,sfixed32:5,int64:0,uint64:0,sint64:0,fixed64:1,sfixed64:1,bool:0,string:2,bytes:2},q=a.types?a.types.packed:{double:1,float:5,int32:0,uint32:0,sint32:0,fixed32:5,sfixed32:5,int64:0,uint64:0,sint64:0,fixed64:1,sfixed64:1,bool:0},J=Object.keys(B),G={$:function(t){return G[t]?G[t].call(this):l[t].decode?l[t].decode(this,this.uint32()):G.$.call(this,"int32")}},Y={$:function(t,n,i){var r=B[t];return void 0===r?l[t].encode?(this.uint32((i<<3|2)>>0).fork(),l[t].encode(n,this).ldelim()):Y.$.call(this,"int32",n,i):Y[t].call(this.uint32(i<<3|r),n)}},V=0;V<J.length;V++)G[J[V]]=a.Reader.prototype[J[V]],Y[J[V]]=a.Writer.prototype[J[V]];!function o(t,s,n,i){for(var r=0,e=Object.keys(t);r<e.length;r++){var u=e[r];if(t[u].$m&&Object.keys(t[u].$m).every(function(t){return Number(t)})){if(n[u])throw Error(`nested type ${n}.${u} has already exist`);n[u]=((c,t)=>{function h(t){for(var n in c){n=c[n];"{"===n[1].charAt(0)?this[n[0]]={}:"["!==n[1].charAt(0)&&"<"!==n[1].charAt(0)||(this[n[0]]=[])}if(t)for(var i=Object.keys(t),r=0;r<i.length;++r)null!=t[i[r]]&&(this[i[r]]=t[i[r]])}var n,i={};for(n in c){var r=c[n],e=r[1];"{"===e.charAt(0)?(h.prototype[r[0]]=a.util.emptyObject,i[e]={$m:e.substring(1).split(",").map(function(t,n){return["$"+(n+1),t,null]}).reduce(function(t,n,i){return t[i+1]=n,t},{})}):"["===e.charAt(0)||"<"===e.charAt(0)?h.prototype[r[0]]=a.util.emptyArray:"bytes"===e?h.prototype[r[0]]=a.util.newBuffer([]):r[2]&&r[2].hasOwnProperty("low")&&r[2].hasOwnProperty("high")?h.prototype[r[0]]=a.util.Long.fromBits(r[2].low,r[2].high,r[2].unsigned):h.prototype[r[0]]=r[2]}return h.create=function(t){return new h(t)},h.decode=function(t,n){t instanceof a.Reader||(t=a.Reader.create(t));for(var i=void 0===n?t.len:t.pos+n,r=new h;t.pos<i;){var e=t.uint32(),o=e>>>3;if(0<o&&c[o]){var s=c[o][0];if("{"===(u=c[o][1]).charAt(0)){r[s]===a.util.emptyObject&&(r[s]={});o=h.$namespace[u].decode(t,t.uint32());r[s][o.$1]=o.$2}else if("["===u.charAt(0)||"<"===u.charAt(0)){u=u.substring(1),r[s]&&r[s].length||(r[s]=[]);var u,o=!G[u]&&!l[u].decode;if(void 0!==q[u=o?"int32":u]&&2==(7&e))for(var f=t.uint32()+t.pos;t.pos<f;)r[s].push(G.$.call(t,u));else r[s].push(G.$.call(t,u))}else r[s]=G.$.call(t,u)}else t.skipType(7&e)}return r},h.encode=function(t,n){for(var i in n=n||a.Writer.create(),c){var r=c[i][0];if("{"===(f=c[i][1]).charAt(0)){if(null!=t[r]&&t.hasOwnProperty(r))for(var e=0,o=Object.keys(t[r]);e<o.length;++e)n.uint32((i<<3|2)>>0).fork(),h.$namespace[f].encode({$1:o[e],$2:t[r][o[e]]},n).ldelim()}else if("["===f.charAt(0)||"<"===f.charAt(0)){var s="<"===f.charAt(0),u=(f=f.substring(1),t[r]);if(null!=u&&u.length){var f=void 0===B[f]&&!l[f].encode?"int32":f;if(s&&void 0!==q[f]){n.uint32((i<<3|2)>>0).fork();for(e=0;e<u.length;e++)Y[f].call(n,u[e]);n.ldelim()}else for(e=0;e<u.length;e++)Y.$.call(n,f,u[e],i)}}else null!=t[r]&&t.hasOwnProperty(r)&&Y.$.call(n,f,t[r],i)}return n},Object.keys(i).length&&(h.$namespace=o(i,s+"."+t,h.$namespace||{},!0)),h})(t[u].$m,u)}else t[u].$s?n[u]=((n,e)=>{function o(t,n,i){a.rpc.Service.call(this,t,n,i)}return((o.prototype=Object.create(a.rpc.Service.prototype)).constructor=o).create=function(t,n,i){return new o(t,n,i)},Object.keys(n).forEach(function(t){var i=n[t];function r(t,n){return this.rpcCall(r,l[i[0]],l[i[1]],t,n)}Object.defineProperty(r,"name",{value:t}),Object.defineProperty(r,"path",{value:s+"."+e}),o.prototype[t]=r}),o})(t[u].$s,u):t[u].$e&&Object.values(t[u].$e).every(function(t){return Number(t)===t})&&(n[u]=(t=>{for(var n=Object.keys(t),i={},r=0;r<n.length;r++)i[i[n[r]]=t[n[r]]]=n[r];return i})(t[u].$e));n[u]&&!i&&(l[s+"."+u]=n[u]),delete t[u].$m,delete t[u].$s,delete t[u].$e,n[u]=o(t[u],Boolean(s)?s+"."+u:u,n[u]||{})}return n}({report:{rtcreport:{DetailLogRequest:{$m:{1:["appid","uint32",0],2:["product","uint32",0],3:["id_name","string",""],4:["timestamp","uint64",{low:0,high:0,unsigned:!0}],5:["litesign","string",""],6:["detail_data","bytes",[]]}},DetailLogResponse:{$m:{1:["code","uint32",0]}}}}},"",l,!1);var Q=l.report;let tt=0,nt=1;function it(t){let n=t.length;for(;0<=--n;)t[n]=0}let rt=29,et=256,ot=et+1+rt,st=30,ut=19,ft=2*ot+1,ct=15,ht=16,at=7,lt=256,vt=16,dt=17,wt=18,bt=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),yt=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),_t=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),mt=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);let u=new Array(2*(ot+2)),pt=(it(u),new Array(2*st)),gt=(it(pt),new Array(512)),Ot=(it(gt),new Array(256)),kt=(it(Ot),new Array(rt)),Et=(it(kt),new Array(st));function At(t,n,i,r,e){this.static_tree=t,this.extra_bits=n,this.extra_base=i,this.elems=r,this.max_length=e,this.has_stree=t&&t.length}it(Et);let St,jt,Rt;function xt(t,n){this.dyn_tree=t,this.max_code=0,this.stat_desc=n}let Tt=t=>t<256?gt[t]:gt[256+(t>>>7)],Zt=(t,n)=>{t.pending_buf[t.pending++]=255&n,t.pending_buf[t.pending++]=n>>>8&255},h=(t,n,i)=>{t.bi_valid>ht-i?(t.bi_buf|=n<<t.bi_valid&65535,Zt(t,t.bi_buf),t.bi_buf=n>>ht-t.bi_valid,t.bi_valid+=i-ht):(t.bi_buf|=n<<t.bi_valid&65535,t.bi_valid+=i)},v=(t,n,i)=>{h(t,i[2*n],i[2*n+1])},Ut=(t,n)=>{let i=0;for(;i|=1&t,t>>>=1,i<<=1,0<--n;);return i>>>1},Nt=(t,n)=>{var i,r=n.dyn_tree,e=n.max_code,o=n.stat_desc.static_tree,s=n.stat_desc.has_stree,u=n.stat_desc.extra_bits,f=n.stat_desc.extra_base,c=n.stat_desc.max_length;let h,a,l,v,d,w=0;for(v=0;v<=ct;v++)t.bl_count[v]=0;for(r[2*t.heap[t.heap_max]+1]=0,h=t.heap_max+1;h<ft;h++)a=t.heap[h],(v=r[2*r[2*a+1]+1]+1)>c&&(v=c,w++),r[2*a+1]=v,a>e||(t.bl_count[v]++,d=0,a>=f&&(d=u[a-f]),i=r[2*a],t.opt_len+=i*(v+d),s&&(t.static_len+=i*(o[2*a+1]+d)));if(0!==w){do{for(v=c-1;0===t.bl_count[v];)v--}while(t.bl_count[v]--,t.bl_count[v+1]+=2,t.bl_count[c]--,0<(w-=2));for(v=c;0!==v;v--)for(a=t.bl_count[v];0!==a;)e<(l=t.heap[--h])||(r[2*l+1]!==v&&(t.opt_len+=(v-r[2*l+1])*r[2*l],r[2*l+1]=v),a--)}},Dt=(t,n,i)=>{var r=new Array(ct+1);let e=0,o,s;for(o=1;o<=ct;o++)e=e+i[o-1]<<1,r[o]=e;for(s=0;s<=n;s++){var u=t[2*s+1];0!==u&&(t[2*s]=Ut(r[u]++,u))}},It=t=>{let n;for(n=0;n<ot;n++)t.dyn_ltree[2*n]=0;for(n=0;n<st;n++)t.dyn_dtree[2*n]=0;for(n=0;n<ut;n++)t.bl_tree[2*n]=0;t.dyn_ltree[2*lt]=1,t.opt_len=t.static_len=0,t.sym_next=t.matches=0},Lt=t=>{8<t.bi_valid?Zt(t,t.bi_buf):0<t.bi_valid&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},Ft=(t,n,i,r)=>{var e=2*n,o=2*i;return t[e]<t[o]||t[e]===t[o]&&r[n]<=r[i]},Pt=(t,n,i)=>{var r=t.heap[i];let e=i<<1;for(;e<=t.heap_len&&(e<t.heap_len&&Ft(n,t.heap[e+1],t.heap[e],t.depth)&&e++,!Ft(n,r,t.heap[e],t.depth));)t.heap[i]=t.heap[e],i=e,e<<=1;t.heap[i]=r},Mt=(t,n,i)=>{var r,e,o,s;let u=0;if(0!==t.sym_next)for(;r=255&t.pending_buf[t.sym_buf+u++],r+=(255&t.pending_buf[t.sym_buf+u++])<<8,e=t.pending_buf[t.sym_buf+u++],0==r?v(t,e,n):(o=Ot[e],v(t,o+et+1,n),0!==(s=bt[o])&&(e-=kt[o],h(t,e,s)),r--,o=Tt(r),v(t,o,i),0!==(s=yt[o])&&(r-=Et[o],h(t,r,s))),u<t.sym_next;);v(t,lt,n)},zt=(t,n)=>{var i=n.dyn_tree,r=n.stat_desc.static_tree,e=n.stat_desc.has_stree,o=n.stat_desc.elems;let s,u,f=-1,c;for(t.heap_len=0,t.heap_max=ft,s=0;s<o;s++)0!==i[2*s]?(t.heap[++t.heap_len]=f=s,t.depth[s]=0):i[2*s+1]=0;for(;t.heap_len<2;)i[2*(c=t.heap[++t.heap_len]=f<2?++f:0)]=1,t.depth[c]=0,t.opt_len--,e&&(t.static_len-=r[2*c+1]);for(n.max_code=f,s=t.heap_len>>1;1<=s;s--)Pt(t,i,s);for(c=o;s=t.heap[1],t.heap[1]=t.heap[t.heap_len--],Pt(t,i,1),u=t.heap[1],t.heap[--t.heap_max]=s,t.heap[--t.heap_max]=u,i[2*c]=i[2*s]+i[2*u],t.depth[c]=(t.depth[s]>=t.depth[u]?t.depth[s]:t.depth[u])+1,i[2*s+1]=i[2*u+1]=c,t.heap[1]=c++,Pt(t,i,1),2<=t.heap_len;);t.heap[--t.heap_max]=t.heap[1],Nt(t,n),Dt(i,f,t.bl_count)},Ct=(t,n,i)=>{let r,e=-1;var o;let s=n[1],u=0,f=7,c=4;for(0===s&&(f=138,c=3),n[2*(i+1)+1]=65535,r=0;r<=i;r++)o=s,s=n[2*(r+1)+1],++u<f&&o===s||(u<c?t.bl_tree[2*o]+=u:0!==o?(o!==e&&t.bl_tree[2*o]++,t.bl_tree[2*vt]++):u<=10?t.bl_tree[2*dt]++:t.bl_tree[2*wt]++,u=0,e=o,c=0===s?(f=138,3):o===s?(f=6,3):(f=7,4))},Ht=(t,n,i)=>{let r,e=-1;var o;let s=n[1],u=0,f=7,c=4;for(0===s&&(f=138,c=3),r=0;r<=i;r++)if(o=s,s=n[2*(r+1)+1],!(++u<f&&o===s)){if(u<c)for(;v(t,o,t.bl_tree),0!=--u;);else 0!==o?(o!==e&&(v(t,o,t.bl_tree),u--),v(t,vt,t.bl_tree),h(t,u-3,2)):u<=10?(v(t,dt,t.bl_tree),h(t,u-3,3)):(v(t,wt,t.bl_tree),h(t,u-11,7));u=0,e=o,c=0===s?(f=138,3):o===s?(f=6,3):(f=7,4)}},Bt=!1;let qt=(t,n,i,r)=>{h(t,0+(r?1:0),3),Lt(t),Zt(t,i),Zt(t,~i),i&&t.pending_buf.set(t.window.subarray(n,n+i),t.pending),t.pending+=i};var f={O:t=>{Bt||((()=>{let t,n,i,r,e;var o=new Array(ct+1);for(i=0,r=0;r<rt-1;r++)for(kt[r]=i,t=0;t<1<<bt[r];t++)Ot[i++]=r;for(Ot[i-1]=r,e=0,r=0;r<16;r++)for(Et[r]=e,t=0;t<1<<yt[r];t++)gt[e++]=r;for(e>>=7;r<st;r++)for(Et[r]=e<<7,t=0;t<1<<yt[r]-7;t++)gt[256+e++]=r;for(n=0;n<=ct;n++)o[n]=0;for(t=0;t<=143;)u[2*t+1]=8,t++,o[8]++;for(;t<=255;)u[2*t+1]=9,t++,o[9]++;for(;t<=279;)u[2*t+1]=7,t++,o[7]++;for(;t<=287;)u[2*t+1]=8,t++,o[8]++;for(Dt(u,ot+1,o),t=0;t<st;t++)pt[2*t+1]=5,pt[2*t]=Ut(t,5);St=new At(u,bt,et+1,ot,ct),jt=new At(pt,yt,0,st,ct),Rt=new At(new Array(0),_t,0,ut,at)})(),Bt=!0),t.l_desc=new xt(t.dyn_ltree,St),t.d_desc=new xt(t.dyn_dtree,jt),t.bl_desc=new xt(t.bl_tree,Rt),t.bi_buf=0,t.bi_valid=0,It(t)},k:qt,A:(t,n,i,r)=>{let e,o,s=0;0<t.level?(2===t.strm.data_type&&(t.strm.data_type=(t=>{let n=4093624447,i;for(i=0;i<=31;i++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*i])return tt;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return nt;for(i=32;i<et;i++)if(0!==t.dyn_ltree[2*i])return nt;return tt})(t)),zt(t,t.l_desc),zt(t,t.d_desc),s=(t=>{let n;for(Ct(t,t.dyn_ltree,t.l_desc.max_code),Ct(t,t.dyn_dtree,t.d_desc.max_code),zt(t,t.bl_desc),n=ut-1;3<=n&&0===t.bl_tree[2*mt[n]+1];n--);return t.opt_len+=3*(n+1)+5+5+4,n})(t),e=t.opt_len+3+7>>>3,(o=t.static_len+3+7>>>3)<=e&&(e=o)):e=o=i+5,i+4<=e&&-1!==n?qt(t,n,i,r):4===t.strategy||o===e?(h(t,2+(r?1:0),3),Mt(t,u,pt)):(h(t,4+(r?1:0),3),((t,n,i,r)=>{let e;for(h(t,n-257,5),h(t,i-1,5),h(t,r-4,4),e=0;e<r;e++)h(t,t.bl_tree[2*mt[e]+1],3);Ht(t,t.dyn_ltree,n-1),Ht(t,t.dyn_dtree,i-1)})(t,t.l_desc.max_code+1,t.d_desc.max_code+1,s+1),Mt(t,t.dyn_ltree,t.dyn_dtree)),It(t),r&&Lt(t)},S:(t,n,i)=>(t.pending_buf[t.sym_buf+t.sym_next++]=n,t.pending_buf[t.sym_buf+t.sym_next++]=n>>8,t.pending_buf[t.sym_buf+t.sym_next++]=i,0===n?t.dyn_ltree[2*i]++:(t.matches++,n--,t.dyn_ltree[2*(Ot[i]+et+1)]++,t.dyn_dtree[2*Tt(n)]++),t.sym_next===t.sym_end),j:t=>{h(t,2,3),v(t,lt,u),16===(t=t).bi_valid?(Zt(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):8<=t.bi_valid&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}},Jt=(t,n,i,r)=>{let e=65535&t|0,o=t>>>16&65535|0,s=0;for(;0!==i;){for(i-=s=2e3<i?2e3:i;e=e+n[r++]|0,o=o+e|0,--s;);e%=65521,o%=65521}return e|o<<16|0};let Gt=new Uint32Array((()=>{let t,n=[];for(var i=0;i<256;i++){t=i;for(var r=0;r<8;r++)t=1&t?3988292384^t>>>1:t>>>1;n[i]=t}return n})());var K=(n,i,t,r)=>{var e=Gt,o=r+t;n^=-1;for(let t=r;t<o;t++)n=n>>>8^e[255&(n^i[t])];return-1^n},Kt={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},n={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};let{O:Wt,k:Xt,A:$t,S:Yt,j:Vt}=f,{Z_NO_FLUSH:Qt,Z_PARTIAL_FLUSH:tn,Z_FULL_FLUSH:nn,Z_FINISH:c,Z_BLOCK:rn,Z_OK:d,Z_STREAM_END:en,Z_STREAM_ERROR:w,Z_DATA_ERROR:on,Z_BUF_ERROR:sn,Z_DEFAULT_COMPRESSION:un,Z_FILTERED:fn,Z_HUFFMAN_ONLY:cn,Z_RLE:hn,Z_FIXED:an,Z_DEFAULT_STRATEGY:ln,Z_UNKNOWN:vn,Z_DEFLATED:dn}=n,wn=9;let bn=286,yn=30,_n=19,mn=2*bn+1,pn=15,b=3,gn=258,y=gn+b+1,On=42,kn=57,En=69,An=73,Sn=91,jn=103,Rn=113,xn=666,_=1,Tn=2,Zn=3,Un=4,Nn=(t,n)=>(t.msg=Kt[n],n),Dn=t=>2*t-(4<t?9:0),In=t=>{let n=t.length;for(;0<=--n;)t[n]=0},Ln=t=>{let n,i,r;var e=t.w_size;for(n=t.hash_size,r=n;i=t.head[--r],t.head[r]=i>=e?i-e:0,--n;);for(n=e,r=n;i=t.prev[--r],t.prev[r]=i>=e?i-e:0,--n;);};let Fn=(t,n,i)=>(n<<t.hash_shift^i)&t.hash_mask,m=t=>{var n=t.state;let i=n.pending;0!==(i=i>t.avail_out?t.avail_out:i)&&(t.output.set(n.pending_buf.subarray(n.pending_out,n.pending_out+i),t.next_out),t.next_out+=i,n.pending_out+=i,t.total_out+=i,t.avail_out-=i,n.pending-=i,0===n.pending)&&(n.pending_out=0)},p=(t,n)=>{$t(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,n),t.block_start=t.strstart,m(t.strm)},g=(t,n)=>{t.pending_buf[t.pending++]=n},Pn=(t,n)=>{t.pending_buf[t.pending++]=n>>>8&255,t.pending_buf[t.pending++]=255&n},Mn=(t,n,i,r)=>{let e=t.avail_in;return 0===(e=e>r?r:e)?0:(t.avail_in-=e,n.set(t.input.subarray(t.next_in,t.next_in+e),i),1===t.state.wrap?t.adler=Jt(t.adler,n,e,i):2===t.state.wrap&&(t.adler=K(t.adler,n,e,i)),t.next_in+=e,t.total_in+=e,e)},zn=(t,n)=>{let i=t.max_chain_length,r=t.strstart,e;var o;let s=t.prev_length,u=t.nice_match;var f=t.strstart>t.w_size-y?t.strstart-(t.w_size-y):0,c=t.window,h=t.w_mask,a=t.prev,l=t.strstart+gn;let v=c[r+s-1],d=c[r+s];t.good_match<=t.prev_length&&(i>>=2),u>t.lookahead&&(u=t.lookahead);do{if(c[(e=n)+s]===d&&c[e+s-1]===v&&c[e]===c[r]&&c[++e]===c[r+1]){for(r+=2,e++;c[++r]===c[++e]&&c[++r]===c[++e]&&c[++r]===c[++e]&&c[++r]===c[++e]&&c[++r]===c[++e]&&c[++r]===c[++e]&&c[++r]===c[++e]&&c[++r]===c[++e]&&r<l;);if(o=gn-(l-r),r=l-gn,o>s){if(t.match_start=n,(s=o)>=u)break;v=c[r+s-1],d=c[r+s]}}}while((n=a[n&h])>f&&0!=--i);return s<=t.lookahead?s:t.lookahead},Cn=t=>{var n=t.w_size;let i,r,e;do{if(r=t.window_size-t.lookahead-t.strstart,t.strstart>=n+(n-y)&&(t.window.set(t.window.subarray(n,n+n-r),0),t.match_start-=n,t.strstart-=n,t.block_start-=n,t.strstart<t.insert&&(t.insert=t.strstart),Ln(t),r+=n),0===t.strm.avail_in)break;if(i=Mn(t.strm,t.window,t.strstart+t.lookahead,r),t.lookahead+=i,t.lookahead+t.insert>=b)for(e=t.strstart-t.insert,t.ins_h=t.window[e],t.ins_h=Fn(t,t.ins_h,t.window[e+1]);t.insert&&(t.ins_h=Fn(t,t.ins_h,t.window[e+b-1]),t.prev[e&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=e,e++,t.insert--,!(t.lookahead+t.insert<b)););}while(t.lookahead<y&&0!==t.strm.avail_in)},Hn=(t,n)=>{let i=t.pending_buf_size-5>t.w_size?t.w_size:t.pending_buf_size-5,r,e,o,s=0;for(var u=t.strm.avail_in;r=65535,o=t.bi_valid+42>>3,!(t.strm.avail_out<o||(o=t.strm.avail_out-o,e=t.strstart-t.block_start,(r=(r=r>e+t.strm.avail_in?e+t.strm.avail_in:r)>o?o:r)<i&&(0===r&&n!==c||n===Qt||r!==e+t.strm.avail_in))||(s=n===c&&r===e+t.strm.avail_in?1:0,Xt(t,0,0,s),t.pending_buf[t.pending-4]=r,t.pending_buf[t.pending-3]=r>>8,t.pending_buf[t.pending-2]=~r,t.pending_buf[t.pending-1]=~r>>8,m(t.strm),e&&(e>r&&(e=r),t.strm.output.set(t.window.subarray(t.block_start,t.block_start+e),t.strm.next_out),t.strm.next_out+=e,t.strm.avail_out-=e,t.strm.total_out+=e,t.block_start+=e,r-=e),r&&(Mn(t.strm,t.strm.output,t.strm.next_out,r),t.strm.next_out+=r,t.strm.avail_out-=r,t.strm.total_out+=r),0!==s)););return(u-=t.strm.avail_in)&&(u>=t.w_size?(t.matches=2,t.window.set(t.strm.input.subarray(t.strm.next_in-t.w_size,t.strm.next_in),0),t.strstart=t.w_size,t.insert=t.strstart):(t.window_size-t.strstart<=u&&(t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,t.strstart<t.insert)&&(t.insert=t.strstart),t.window.set(t.strm.input.subarray(t.strm.next_in-u,t.strm.next_in),t.strstart),t.strstart+=u,t.insert+=t.w_size-t.insert<u?t.w_size-t.insert:u),t.block_start=t.strstart),t.high_water<t.strstart&&(t.high_water=t.strstart),s?Un:n!==Qt&&n!==c&&0===t.strm.avail_in&&t.strstart===t.block_start?Tn:(o=t.window_size-t.strstart,t.strm.avail_in>o&&t.block_start>=t.w_size&&(t.block_start-=t.w_size,t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,o+=t.w_size,t.strstart<t.insert)&&(t.insert=t.strstart),(o=o>t.strm.avail_in?t.strm.avail_in:o)&&(Mn(t.strm,t.window,t.strstart,o),t.strstart+=o,t.insert+=o>t.w_size-t.insert?t.w_size-t.insert:o),t.high_water<t.strstart&&(t.high_water=t.strstart),o=t.bi_valid+42>>3,o=65535<t.pending_buf_size-o?65535:t.pending_buf_size-o,i=o>t.w_size?t.w_size:o,((e=t.strstart-t.block_start)>=i||(e||n===c)&&n!==Qt&&0===t.strm.avail_in&&e<=o)&&(r=e>o?o:e,s=n===c&&0===t.strm.avail_in&&r===e?1:0,Xt(t,t.block_start,r,s),t.block_start+=r,m(t.strm)),s?Zn:_)};t=(t,n)=>{let i,r;for(;;){if(t.lookahead<y){if(Cn(t),t.lookahead<y&&n===Qt)return _;if(0===t.lookahead)break}if(i=0,t.lookahead>=b&&(t.ins_h=Fn(t,t.ins_h,t.window[t.strstart+b-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==i&&t.strstart-i<=t.w_size-y&&(t.match_length=zn(t,i)),t.match_length>=b)if(r=Yt(t,t.strstart-t.match_start,t.match_length-b),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=b){for(t.match_length--;t.strstart++,t.ins_h=Fn(t,t.ins_h,t.window[t.strstart+b-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,0!=--t.match_length;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=Fn(t,t.ins_h,t.window[t.strstart+1]);else r=Yt(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(r&&(p(t,!1),0===t.strm.avail_out))return _}return t.insert=t.strstart<b-1?t.strstart:b-1,n===c?(p(t,!0),0===t.strm.avail_out?Zn:Un):t.sym_next&&(p(t,!1),0===t.strm.avail_out)?_:Tn},f=(t,n)=>{let i,r;for(var e;;){if(t.lookahead<y){if(Cn(t),t.lookahead<y&&n===Qt)return _;if(0===t.lookahead)break}if(i=0,t.lookahead>=b&&(t.ins_h=Fn(t,t.ins_h,t.window[t.strstart+b-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=b-1,0!==i&&t.prev_length<t.max_lazy_match&&t.strstart-i<=t.w_size-y&&(t.match_length=zn(t,i),t.match_length<=5)&&(t.strategy===fn||t.match_length===b&&4096<t.strstart-t.match_start)&&(t.match_length=b-1),t.prev_length>=b&&t.match_length<=t.prev_length){for(e=t.strstart+t.lookahead-b,r=Yt(t,t.strstart-1-t.prev_match,t.prev_length-b),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=e&&(t.ins_h=Fn(t,t.ins_h,t.window[t.strstart+b-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!=--t.prev_length;);if(t.match_available=0,t.match_length=b-1,t.strstart++,r&&(p(t,!1),0===t.strm.avail_out))return _}else if(t.match_available){if((r=Yt(t,0,t.window[t.strstart-1]))&&p(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return _}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(r=Yt(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<b-1?t.strstart:b-1,n===c?(p(t,!0),0===t.strm.avail_out?Zn:Un):t.sym_next&&(p(t,!1),0===t.strm.avail_out)?_:Tn};function O(t,n,i,r,e){this.good_length=t,this.max_lazy=n,this.nice_length=i,this.max_chain=r,this.func=e}let Bn=[new O(0,0,0,0,Hn),new O(4,4,8,4,t),new O(4,5,16,8,t),new O(4,6,32,32,t),new O(4,4,16,16,f),new O(8,16,32,32,f),new O(8,16,128,128,f),new O(8,32,128,256,f),new O(32,128,258,1024,f),new O(32,258,258,4096,f)],qn=t=>{t.window_size=2*t.w_size,In(t.head),t.max_lazy_match=Bn[t.level].max_lazy,t.good_match=Bn[t.level].good_length,t.nice_match=Bn[t.level].nice_length,t.max_chain_length=Bn[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=b-1,t.match_available=0,t.ins_h=0};function Jn(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=dn,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(2*mn),this.dyn_dtree=new Uint16Array(2*(2*yn+1)),this.bl_tree=new Uint16Array(2*(2*_n+1)),In(this.dyn_ltree),In(this.dyn_dtree),In(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(pn+1),this.heap=new Uint16Array(2*bn+1),In(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*bn+1),In(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}let Gn=t=>{var n;return!t||!(n=t.state)||n.strm!==t||n.status!==On&&n.status!==kn&&n.status!==En&&n.status!==An&&n.status!==Sn&&n.status!==jn&&n.status!==Rn&&n.status!==xn?1:0},Kn=t=>{if(Gn(t))return Nn(t,w);t.total_in=t.total_out=0,t.data_type=vn;var n=t.state;return n.pending=0,n.pending_out=0,n.wrap<0&&(n.wrap=-n.wrap),n.status=2===n.wrap?kn:n.wrap?On:Rn,t.adler=2===n.wrap?0:1,n.last_flush=-2,Wt(n),d},Wn=t=>{var n=Kn(t);return n===d&&qn(t.state),n};let Xn=(t,n,i,r,e,o)=>{if(!t)return w;let s=1;if(n===un&&(n=6),r<0?(s=0,r=-r):15<r&&(s=2,r-=16),e<1||e>wn||i!==dn||r<8||15<r||n<0||9<n||o<0||o>an||8===r&&1!==s)return Nn(t,w);8===r&&(r=9);var u=new Jn;return(t.state=u).strm=t,u.status=On,u.wrap=s,u.gzhead=null,u.w_bits=r,u.w_size=1<<u.w_bits,u.w_mask=u.w_size-1,u.hash_bits=e+7,u.hash_size=1<<u.hash_bits,u.hash_mask=u.hash_size-1,u.hash_shift=~~((u.hash_bits+b-1)/b),u.window=new Uint8Array(2*u.w_size),u.head=new Uint16Array(u.hash_size),u.prev=new Uint16Array(u.w_size),u.lit_bufsize=1<<e+6,u.pending_buf_size=4*u.lit_bufsize,u.pending_buf=new Uint8Array(u.pending_buf_size),u.sym_buf=u.lit_bufsize,u.sym_end=3*(u.lit_bufsize-1),u.level=n,u.strategy=o,u.method=i,Wn(t)};var $n={deflateInit:(t,n)=>Xn(t,n,dn,15,8,ln),deflateInit2:Xn,deflateReset:Wn,deflateResetKeep:Kn,deflateSetHeader:(t,n)=>Gn(t)||2!==t.state.wrap?w:(t.state.gzhead=n,d),deflate:(i,t)=>{if(Gn(i)||t>rn||t<0)return i?Nn(i,w):w;var r=i.state;if(!i.output||0!==i.avail_in&&!i.input||r.status===xn&&t!==c)return Nn(i,0===i.avail_out?sn:w);var e=r.last_flush;if(r.last_flush=t,0!==r.pending){if(m(i),0===i.avail_out)return r.last_flush=-1,d}else if(0===i.avail_in&&Dn(t)<=Dn(e)&&t!==c)return Nn(i,sn);if(r.status===xn&&0!==i.avail_in)return Nn(i,sn);if(r.status===On&&0===r.wrap&&(r.status=Rn),r.status===On){let t=dn+(r.w_bits-8<<4)<<8,n=-1;if(n=r.strategy>=cn||r.level<2?0:r.level<6?1:6===r.level?2:3,t|=n<<6,0!==r.strstart&&(t|=32),t+=31-t%31,Pn(r,t),0!==r.strstart&&(Pn(r,i.adler>>>16),Pn(r,65535&i.adler)),i.adler=1,r.status=Rn,m(i),0!==r.pending)return r.last_flush=-1,d}if(r.status===kn)if(i.adler=0,g(r,31),g(r,139),g(r,8),r.gzhead)g(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),g(r,255&r.gzhead.time),g(r,r.gzhead.time>>8&255),g(r,r.gzhead.time>>16&255),g(r,r.gzhead.time>>24&255),g(r,9===r.level?2:r.strategy>=cn||r.level<2?4:0),g(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(g(r,255&r.gzhead.extra.length),g(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(i.adler=K(i.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=En;else if(g(r,0),g(r,0),g(r,0),g(r,0),g(r,0),g(r,9===r.level?2:r.strategy>=cn||r.level<2?4:0),g(r,3),r.status=Rn,m(i),0!==r.pending)return r.last_flush=-1,d;if(r.status===En){if(r.gzhead.extra){let t=r.pending,n=(65535&r.gzhead.extra.length)-r.gzindex;for(;r.pending+n>r.pending_buf_size;){var o=r.pending_buf_size-r.pending;if(r.pending_buf.set(r.gzhead.extra.subarray(r.gzindex,r.gzindex+o),r.pending),r.pending=r.pending_buf_size,r.gzhead.hcrc&&r.pending>t&&(i.adler=K(i.adler,r.pending_buf,r.pending-t,t)),r.gzindex+=o,m(i),0!==r.pending)return r.last_flush=-1,d;t=0,n-=o}e=new Uint8Array(r.gzhead.extra);r.pending_buf.set(e.subarray(r.gzindex,r.gzindex+n),r.pending),r.pending+=n,r.gzhead.hcrc&&r.pending>t&&(i.adler=K(i.adler,r.pending_buf,r.pending-t,t)),r.gzindex=0}r.status=An}if(r.status===An){if(r.gzhead.name){let t=r.pending,n;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>t&&(i.adler=K(i.adler,r.pending_buf,r.pending-t,t)),m(i),0!==r.pending)return r.last_flush=-1,d;t=0}}while(n=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,g(r,n),0!==n);r.gzhead.hcrc&&r.pending>t&&(i.adler=K(i.adler,r.pending_buf,r.pending-t,t)),r.gzindex=0}r.status=Sn}if(r.status===Sn){if(r.gzhead.comment){let t=r.pending,n;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>t&&(i.adler=K(i.adler,r.pending_buf,r.pending-t,t)),m(i),0!==r.pending)return r.last_flush=-1,d;t=0}}while(n=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,g(r,n),0!==n);r.gzhead.hcrc&&r.pending>t&&(i.adler=K(i.adler,r.pending_buf,r.pending-t,t))}r.status=jn}if(r.status===jn){if(r.gzhead.hcrc){if(r.pending+2>r.pending_buf_size&&(m(i),0!==r.pending))return r.last_flush=-1,d;g(r,255&i.adler),g(r,i.adler>>8&255),i.adler=0}if(r.status=Rn,m(i),0!==r.pending)return r.last_flush=-1,d}if(0!==i.avail_in||0!==r.lookahead||t!==Qt&&r.status!==xn){e=0===r.level?Hn(r,t):r.strategy===cn?((t,n)=>{for(var i;;){if(0===t.lookahead&&(Cn(t),0===t.lookahead)){if(n===Qt)return _;break}if(t.match_length=0,i=Yt(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,i&&(p(t,!1),0===t.strm.avail_out))return _}return t.insert=0,n===c?(p(t,!0),0===t.strm.avail_out?Zn:Un):t.sym_next&&(p(t,!1),0===t.strm.avail_out)?_:Tn})(r,t):r.strategy===hn?((t,n)=>{let i;var r;let e,o;for(var s=t.window;;){if(t.lookahead<=gn){if(Cn(t),t.lookahead<=gn&&n===Qt)return _;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=b&&0<t.strstart&&(r=s[e=t.strstart-1])===s[++e]&&r===s[++e]&&r===s[++e]){for(o=t.strstart+gn;r===s[++e]&&r===s[++e]&&r===s[++e]&&r===s[++e]&&r===s[++e]&&r===s[++e]&&r===s[++e]&&r===s[++e]&&e<o;);t.match_length=gn-(o-e),t.lookahead<t.match_length&&(t.match_length=t.lookahead)}if(t.match_length>=b?(i=Yt(t,1,t.match_length-b),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(i=Yt(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),i&&(p(t,!1),0===t.strm.avail_out))return _}return t.insert=0,n===c?(p(t,!0),0===t.strm.avail_out?Zn:Un):t.sym_next&&(p(t,!1),0===t.strm.avail_out)?_:Tn})(r,t):Bn[r.level].func(r,t);if(e!==Zn&&e!==Un||(r.status=xn),e===_||e===Zn)return 0===i.avail_out&&(r.last_flush=-1),d;if(e===Tn&&(t===tn?Vt(r):t!==rn&&(Xt(r,0,0,!1),t===nn)&&(In(r.head),0===r.lookahead)&&(r.strstart=0,r.block_start=0,r.insert=0),m(i),0===i.avail_out))return r.last_flush=-1,d}return t!==c||!(r.wrap<=0)&&(2===r.wrap?(g(r,255&i.adler),g(r,i.adler>>8&255),g(r,i.adler>>16&255),g(r,i.adler>>24&255),g(r,255&i.total_in),g(r,i.total_in>>8&255),g(r,i.total_in>>16&255),g(r,i.total_in>>24&255)):(Pn(r,i.adler>>>16),Pn(r,65535&i.adler)),m(i),0<r.wrap&&(r.wrap=-r.wrap),0!==r.pending)?d:en},deflateEnd:t=>{var n;return Gn(t)?w:(n=t.state.status,t.state=null,n===Rn?Nn(t,on):d)},deflateSetDictionary:(t,n)=>{let i=n.length;if(Gn(t))return w;var r=t.state,e=r.wrap;if(2===e||1===e&&r.status!==On||r.lookahead)return w;1===e&&(t.adler=Jt(t.adler,n,i,0)),r.wrap=0,i>=r.w_size&&(0===e&&(In(r.head),r.strstart=0,r.block_start=0,r.insert=0),(o=new Uint8Array(r.w_size)).set(n.subarray(i-r.w_size,i),0),n=o,i=r.w_size);var o=t.avail_in,s=t.next_in,u=t.input;for(t.avail_in=i,t.next_in=0,t.input=n,Cn(r);r.lookahead>=b;){let t=r.strstart,n=r.lookahead-(b-1);for(;r.ins_h=Fn(r,r.ins_h,r.window[t+b-1]),r.prev[t&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=t,t++,--n;);r.strstart=t,r.lookahead=b-1,Cn(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=b-1,r.match_available=0,t.next_in=s,t.input=u,t.avail_in=o,r.wrap=e,d},deflateInfo:"pako deflate (from Nodeca project)"};var Yn=function(t){for(var n,i,r=Array.prototype.slice.call(arguments,1);r.length;){var e=r.shift();if(e){if("object"!=typeof e)throw new TypeError(e+"must be non-object");for(var o in e)n=e,i=o,Object.prototype.hasOwnProperty.call(n,i)&&(t[o]=e[o])}}return t},Vn=r=>{let i=0;for(let t=0,n=r.length;t<n;t++)i+=r[t].length;var e=new Uint8Array(i);for(let t=0,n=0,i=r.length;t<i;t++){var o=r[t];e.set(o,n),n+=o.length}return e};let Qn=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){Qn=!1}let ti=new Uint8Array(256);for(let t=0;t<256;t++)ti[t]=252<=t?6:248<=t?5:240<=t?4:224<=t?3:192<=t?2:1;ti[254]=ti[254]=1;var ni=t=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(t);let n,i,r,e,o,s=t.length,u=0;for(e=0;e<s;e++)55296==(64512&(i=t.charCodeAt(e)))&&e+1<s&&56320==(64512&(r=t.charCodeAt(e+1)))&&(i=65536+(i-55296<<10)+(r-56320),e++),u+=i<128?1:i<2048?2:i<65536?3:4;for(n=new Uint8Array(u),o=0,e=0;o<u;e++)55296==(64512&(i=t.charCodeAt(e)))&&e+1<s&&56320==(64512&(r=t.charCodeAt(e+1)))&&(i=65536+(i-55296<<10)+(r-56320),e++),i<128?n[o++]=i:(i<2048?n[o++]=192|i>>>6:(i<65536?n[o++]=224|i>>>12:(n[o++]=240|i>>>18,n[o++]=128|i>>>12&63),n[o++]=128|i>>>6&63),n[o++]=128|63&i);return n},ii=(i,t)=>{var r=t||i.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(i.subarray(0,t));let e,o;var s=new Array(2*r);for(o=0,e=0;e<r;){let n=i[e++];if(n<128)s[o++]=n;else{let t=ti[n];if(4<t)s[o++]=65533,e+=t-1;else{for(n&=2===t?31:3===t?15:7;1<t&&e<r;)n=n<<6|63&i[e++],t--;1<t?s[o++]=65533:n<65536?s[o++]=n:(n-=65536,s[o++]=55296|n>>10&1023,s[o++]=56320|1023&n)}}}return((n,i)=>{if(i<65534&&n.subarray&&Qn)return String.fromCharCode.apply(null,n.length===i?n:n.subarray(0,i));let r="";for(let t=0;t<i;t++)r+=String.fromCharCode(n[t]);return r})(s,o)},ri=(t,n)=>{let i=(n=(n=n||t.length)>t.length?t.length:n)-1;for(;0<=i&&128==(192&t[i]);)i--;return!(i<0)&&0!==i&&i+ti[t[i]]>n?i:n};var ei=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};let oi=Object.prototype.toString,{Z_NO_FLUSH:si,Z_SYNC_FLUSH:ui,Z_FULL_FLUSH:fi,Z_FINISH:ci,Z_OK:hi,Z_STREAM_END:ai,Z_DEFAULT_COMPRESSION:li,Z_DEFAULT_STRATEGY:vi,Z_DEFLATED:di}=n;function wi(n){this.options=Yn({level:li,method:di,chunkSize:16384,windowBits:15,memLevel:8,strategy:vi},n||{});var n=this.options,i=(n.raw&&0<n.windowBits?n.windowBits=-n.windowBits:n.gzip&&0<n.windowBits&&n.windowBits<16&&(n.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ei,this.strm.avail_out=0,$n.deflateInit2(this.strm,n.level,n.method,n.windowBits,n.memLevel,n.strategy));if(i!==hi)throw new Error(Kt[i]);if(n.header&&$n.deflateSetHeader(this.strm,n.header),n.dictionary){let t;if(t="string"==typeof n.dictionary?ni(n.dictionary):"[object ArrayBuffer]"===oi.call(n.dictionary)?new Uint8Array(n.dictionary):n.dictionary,(i=$n.deflateSetDictionary(this.strm,t))!==hi)throw new Error(Kt[i]);this.R=!0}}function bi(t,n){n=new wi(n);if(n.push(t,!0),n.err)throw n.msg||Kt[n.err];return n.result}wi.prototype.push=function(t,n){var i=this.strm,r=this.options.chunkSize;let e,o;if(this.ended)return!1;for(o=n===~~n?n:!0===n?ci:si,"string"==typeof t?i.input=ni(t):"[object ArrayBuffer]"===oi.call(t)?i.input=new Uint8Array(t):i.input=t,i.next_in=0,i.avail_in=i.input.length;;)if(0===i.avail_out&&(i.output=new Uint8Array(r),i.next_out=0,i.avail_out=r),(o===ui||o===fi)&&i.avail_out<=6)this.onData(i.output.subarray(0,i.next_out)),i.avail_out=0;else{if($n.deflate(i,o)===ai)return 0<i.next_out&&this.onData(i.output.subarray(0,i.next_out)),e=$n.deflateEnd(this.strm),this.onEnd(e),this.ended=!0,e===hi;if(0===i.avail_out)this.onData(i.output);else if(0<o&&0<i.next_out)this.onData(i.output.subarray(0,i.next_out)),i.avail_out=0;else if(0===i.avail_in)break}return!0},wi.prototype.onData=function(t){this.chunks.push(t)},wi.prototype.onEnd=function(t){t===hi&&(this.result=Vn(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function yi(t,n){return(n=n||{}).raw=!0,bi(t,n)}function _i(t,n){return(n=n||{}).gzip=!0,bi(t,n)}let mi=wi,pi=bi,gi=n,Oi={Deflate:mi,deflate:pi,deflateRaw:yi,gzip:_i,constants:gi},ki=16209,Ei=16191;let Ai=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Si=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),ji=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Ri=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var xi=(t,n,i,r,e,o,s,u)=>{var f,c=u.bits;let h=0,a=0,l=0,v=0,d=0,w=0,b=0,y=0,_=0,m=0,p,g,O,k,E=null,A;var S=new Uint16Array(16),j=new Uint16Array(16);let R=null,x,T,Z;for(h=0;h<=15;h++)S[h]=0;for(a=0;a<r;a++)S[n[i+a]]++;for(d=c,v=15;1<=v&&0===S[v];v--);if(d>v&&(d=v),0===v)e[o++]=20971520,e[o++]=20971520,u.bits=1;else{for(l=1;l<v&&0===S[l];l++);for(d<l&&(d=l),y=1,h=1;h<=15;h++)if((y=(y<<=1)-S[h])<0)return-1;if(0<y&&(0===t||1!==v))return-1;for(j[1]=0,h=1;h<15;h++)j[h+1]=j[h]+S[h];for(a=0;a<r;a++)0!==n[i+a]&&(s[j[n[i+a]]++]=a);if(A=0===t?(E=R=s,20):1===t?(E=Ai,R=Si,257):(E=ji,R=Ri,0),m=0,a=0,h=l,k=o,w=d,b=0,O=-1,f=(_=1<<d)-1,1===t&&852<_||2===t&&592<_)return 1;for(;;){for(x=h-b,Z=s[a]+1<A?(T=0,s[a]):s[a]>=A?(T=R[s[a]-A],E[s[a]-A]):(T=96,0),p=1<<h-b,g=1<<w,l=g;g-=p,e[k+(m>>b)+g]=x<<24|T<<16|Z|0,0!==g;);for(p=1<<h-1;m&p;)p>>=1;if(m=0!==p?(m&=p-1)+p:0,a++,0==--S[h]){if(h===v)break;h=n[i+s[a]]}if(h>d&&(m&f)!==O){for(0===b&&(b=d),k+=l,w=h-b,y=1<<w;w+b<v&&!((y-=S[w+b])<=0);)w++,y<<=1;if(_+=1<<w,1===t&&852<_||2===t&&592<_)return 1;e[O=m&f]=d<<24|w<<16|k-o|0}}0!==m&&(e[k+m]=h-b<<24|64<<16|0),u.bits=d}return 0};let Ti=1,Zi=2,{Z_FINISH:Ui,Z_BLOCK:Ni,Z_TREES:Di,Z_OK:Ii,Z_STREAM_END:Li,Z_NEED_DICT:Fi,Z_STREAM_ERROR:W,Z_DATA_ERROR:Pi,Z_MEM_ERROR:Mi,Z_BUF_ERROR:zi,Z_DEFLATED:Ci}=n,Hi=16180,Bi=16190,X=16191,qi=16199,Ji=16200,$=16209,Gi=16211,Ki=852,Wi=592;let Xi=t=>(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24);function $i(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}let Yi=t=>{var n;return!t||!(n=t.state)||n.strm!==t||n.mode<Hi||n.mode>Gi?1:0},Vi=t=>{var n;return Yi(t)?W:(n=t.state,t.total_in=t.total_out=n.total=0,t.msg="",n.wrap&&(t.adler=1&n.wrap),n.mode=Hi,n.last=0,n.havedict=0,n.flags=-1,n.dmax=32768,n.head=null,n.hold=0,n.bits=0,n.lencode=n.lendyn=new Int32Array(Ki),n.distcode=n.distdyn=new Int32Array(Wi),n.sane=1,n.back=-1,Ii)},Qi=t=>{var n;return Yi(t)?W:((n=t.state).wsize=0,n.whave=0,n.wnext=0,Vi(t))},tr=(t,n)=>{let i;var r;return Yi(t)||(r=t.state,n<0?(i=0,n=-n):(i=5+(n>>4),n<48&&(n&=15)),n&&(n<8||15<n))?W:(null!==r.window&&r.wbits!==n&&(r.window=null),r.wrap=i,r.wbits=n,Qi(t))},nr=(t,n)=>{var i;return t?(i=new $i,(t.state=i).strm=t,i.window=null,i.mode=Hi,(i=tr(t,n))!==Ii&&(t.state=null),i):W};let ir=!0,rr,er,or=(t,n,i,r)=>{let e;t=t.state;return null===t.window&&(t.wsize=1<<t.wbits,t.wnext=0,t.whave=0,t.window=new Uint8Array(t.wsize)),t.wsize<=r?(t.window.set(n.subarray(i-t.wsize,i),0),t.wnext=0,t.whave=t.wsize):((e=t.wsize-t.wnext)>r&&(e=r),t.window.set(n.subarray(i-r,i-r+e),t.wnext),(r-=e)?(t.window.set(n.subarray(i-r,i),0),t.wnext=r,t.whave=t.wsize):(t.wnext+=e,t.wnext===t.wsize&&(t.wnext=0),t.whave<t.wsize&&(t.whave+=e))),0};var k={inflateReset:Qi,inflateReset2:tr,inflateResetKeep:Vi,inflateInit:t=>nr(t,15),inflateInit2:nr,inflate:(c,t)=>{var n;let i,r,e,o,s,u,f,h,a,l,v,L,F,d=0,w,b,y,_,m,p,g,O;var k=new Uint8Array(4);let E,A;var S,P,j,M,R,z,x,T,C,H,B,q,Z,U,N,J=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Yi(c)||!c.output||!c.input&&0!==c.avail_in)return W;(n=c.state).mode===X&&(n.mode=16192),o=c.next_out,r=c.output,u=c.avail_out,e=c.next_in,i=c.input,s=c.avail_in,f=n.hold,h=n.bits,a=s,l=u,O=Ii;t:for(;;)switch(n.mode){case Hi:if(0===n.wrap)n.mode=16192;else{for(;h<16;){if(0===s)break t;s--,f+=i[e++]<<h,h+=8}2&n.wrap&&35615===f?(0===n.wbits&&(n.wbits=15),k[n.check=0]=255&f,k[1]=f>>>8&255,n.check=K(n.check,k,2,0),f=0,h=0,n.mode=16181):(n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&f)<<8)+(f>>8))%31?(c.msg="incorrect header check",n.mode=$):(15&f)!==Ci?(c.msg="unknown compression method",n.mode=$):(f>>>=4,h-=4,g=8+(15&f),0===n.wbits&&(n.wbits=g),15<g||g>n.wbits?(c.msg="invalid window size",n.mode=$):(n.dmax=1<<n.wbits,n.flags=0,c.adler=n.check=1,n.mode=512&f?16189:X,f=0,h=0)))}break;case 16181:for(;h<16;){if(0===s)break t;s--,f+=i[e++]<<h,h+=8}if(n.flags=f,(255&n.flags)!==Ci){c.msg="unknown compression method",n.mode=$;break}if(57344&n.flags){c.msg="unknown header flags set",n.mode=$;break}n.head&&(n.head.text=f>>8&1),512&n.flags&&4&n.wrap&&(k[0]=255&f,k[1]=f>>>8&255,n.check=K(n.check,k,2,0)),f=0,h=0,n.mode=16182;case 16182:for(;h<32;){if(0===s)break t;s--,f+=i[e++]<<h,h+=8}n.head&&(n.head.time=f),512&n.flags&&4&n.wrap&&(k[0]=255&f,k[1]=f>>>8&255,k[2]=f>>>16&255,k[3]=f>>>24&255,n.check=K(n.check,k,4,0)),f=0,h=0,n.mode=16183;case 16183:for(;h<16;){if(0===s)break t;s--,f+=i[e++]<<h,h+=8}n.head&&(n.head.xflags=255&f,n.head.os=f>>8),512&n.flags&&4&n.wrap&&(k[0]=255&f,k[1]=f>>>8&255,n.check=K(n.check,k,2,0)),f=0,h=0,n.mode=16184;case 16184:if(1024&n.flags){for(;h<16;){if(0===s)break t;s--,f+=i[e++]<<h,h+=8}n.length=f,n.head&&(n.head.extra_len=f),512&n.flags&&4&n.wrap&&(k[0]=255&f,k[1]=f>>>8&255,n.check=K(n.check,k,2,0)),f=0,h=0}else n.head&&(n.head.extra=null);n.mode=16185;case 16185:if(1024&n.flags&&((v=(v=n.length)>s?s:v)&&(n.head&&(g=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(i.subarray(e,e+v),g)),512&n.flags&&4&n.wrap&&(n.check=K(n.check,i,v,e)),s-=v,e+=v,n.length-=v),n.length))break t;n.length=0,n.mode=16186;case 16186:if(2048&n.flags){if(0===s)break t;for(v=0;g=i[e+v++],n.head&&g&&n.length<65536&&(n.head.name+=String.fromCharCode(g)),g&&v<s;);if(512&n.flags&&4&n.wrap&&(n.check=K(n.check,i,v,e)),s-=v,e+=v,g)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=16187;case 16187:if(4096&n.flags){if(0===s)break t;for(v=0;g=i[e+v++],n.head&&g&&n.length<65536&&(n.head.comment+=String.fromCharCode(g)),g&&v<s;);if(512&n.flags&&4&n.wrap&&(n.check=K(n.check,i,v,e)),s-=v,e+=v,g)break t}else n.head&&(n.head.comment=null);n.mode=16188;case 16188:if(512&n.flags){for(;h<16;){if(0===s)break t;s--,f+=i[e++]<<h,h+=8}if(4&n.wrap&&f!==(65535&n.check)){c.msg="header crc mismatch",n.mode=$;break}f=0,h=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),c.adler=n.check=0,n.mode=X;break;case 16189:for(;h<32;){if(0===s)break t;s--,f+=i[e++]<<h,h+=8}c.adler=n.check=Xi(f),f=0,h=0,n.mode=Bi;case Bi:if(0===n.havedict)return c.next_out=o,c.avail_out=u,c.next_in=e,c.avail_in=s,n.hold=f,n.bits=h,Fi;c.adler=n.check=1,n.mode=X;case X:if(t===Ni||t===Di)break t;case 16192:if(n.last)f>>>=7&h,h-=7&h,n.mode=16206;else{for(;h<3;){if(0===s)break t;s--,f+=i[e++]<<h,h+=8}switch(n.last=1&f,f>>>=1,--h,3&f){case 0:n.mode=16193;break;case 1:if((n=>{if(ir){rr=new Int32Array(512),er=new Int32Array(32);let t=0;for(;t<144;)n.lens[t++]=8;for(;t<256;)n.lens[t++]=9;for(;t<280;)n.lens[t++]=7;for(;t<288;)n.lens[t++]=8;for(xi(Ti,n.lens,0,288,rr,0,n.work,{bits:9}),t=0;t<32;)n.lens[t++]=5;xi(Zi,n.lens,0,32,er,0,n.work,{bits:5}),ir=!1}n.lencode=rr,n.lenbits=9,n.distcode=er,n.distbits=5})(n),n.mode=qi,t!==Di)break;f>>>=2,h-=2;break t;case 2:n.mode=16196;break;case 3:c.msg="invalid block type",n.mode=$}f>>>=2,h-=2}break;case 16193:for(f>>>=7&h,h-=7&h;h<32;){if(0===s)break t;s--,f+=i[e++]<<h,h+=8}if((65535&f)!=(f>>>16^65535)){c.msg="invalid stored block lengths",n.mode=$;break}if(n.length=65535&f,f=0,h=0,n.mode=16194,t===Di)break t;case 16194:n.mode=16195;case 16195:if(v=n.length){if(0===(v=(v=v>s?s:v)>u?u:v))break t;r.set(i.subarray(e,e+v),o),s-=v,e+=v,u-=v,o+=v,n.length-=v}else n.mode=X;break;case 16196:for(;h<14;){if(0===s)break t;s--,f+=i[e++]<<h,h+=8}if(n.nlen=257+(31&f),f>>>=5,h-=5,n.ndist=1+(31&f),f>>>=5,h-=5,n.ncode=4+(15&f),f>>>=4,h-=4,286<n.nlen||30<n.ndist){c.msg="too many length or distance symbols",n.mode=$;break}n.have=0,n.mode=16197;case 16197:for(;n.have<n.ncode;){for(;h<3;){if(0===s)break t;s--,f+=i[e++]<<h,h+=8}n.lens[J[n.have++]]=7&f,f>>>=3,h-=3}for(;n.have<19;)n.lens[J[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,E={bits:n.lenbits},O=xi(0,n.lens,0,19,n.lencode,0,n.work,E),n.lenbits=E.bits,O){c.msg="invalid code lengths set",n.mode=$;break}n.have=0,n.mode=16198;case 16198:for(;n.have<n.nlen+n.ndist;){for(;d=n.lencode[f&(1<<n.lenbits)-1],w=d>>>24,b=d>>>16&255,y=65535&d,!(w<=h);){if(0===s)break t;s--,f+=i[e++]<<h,h+=8}if(y<16)f>>>=w,h-=w,n.lens[n.have++]=y;else{if(16===y){for(A=w+2;h<A;){if(0===s)break t;s--,f+=i[e++]<<h,h+=8}if(f>>>=w,h-=w,0===n.have){c.msg="invalid bit length repeat",n.mode=$;break}g=n.lens[n.have-1],v=3+(3&f),f>>>=2,h-=2}else if(17===y){for(A=w+3;h<A;){if(0===s)break t;s--,f+=i[e++]<<h,h+=8}f>>>=w,h-=w,g=0,v=3+(7&f),f>>>=3,h-=3}else{for(A=w+7;h<A;){if(0===s)break t;s--,f+=i[e++]<<h,h+=8}f>>>=w,h-=w,g=0,v=11+(127&f),f>>>=7,h-=7}if(n.have+v>n.nlen+n.ndist){c.msg="invalid bit length repeat",n.mode=$;break}for(;v--;)n.lens[n.have++]=g}}if(n.mode===$)break;if(0===n.lens[256]){c.msg="invalid code -- missing end-of-block",n.mode=$;break}if(n.lenbits=9,E={bits:n.lenbits},O=xi(Ti,n.lens,0,n.nlen,n.lencode,0,n.work,E),n.lenbits=E.bits,O){c.msg="invalid literal/lengths set",n.mode=$;break}if(n.distbits=6,n.distcode=n.distdyn,E={bits:n.distbits},O=xi(Zi,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,E),n.distbits=E.bits,O){c.msg="invalid distances set",n.mode=$;break}if(n.mode=qi,t===Di)break t;case qi:n.mode=Ji;case Ji:if(6<=s&&258<=u){c.next_out=o,c.avail_out=u,c.next_in=e,c.avail_in=s,n.hold=f,n.bits=h;{D=void 0;G=void 0;S=void 0;P=void 0;j=void 0;M=void 0;R=void 0;z=void 0;x=void 0;T=void 0;C=void 0;H=void 0;B=void 0;q=void 0;Z=void 0;U=void 0;N=void 0;I=void 0;var D=c;var G=l;let t;let n,i,r,e,o,s,u,f;var I=D.state;t=D.next_in,U=D.input,S=t+(D.avail_in-5),n=D.next_out,N=D.output,P=n-(G-D.avail_out),j=n+(D.avail_out-257),M=I.dmax,R=I.wsize,z=I.whave,x=I.wnext,T=I.window,i=I.hold,r=I.bits,C=I.lencode,H=I.distcode,B=(1<<I.lenbits)-1,q=(1<<I.distbits)-1;n:do{for(r<15&&(i+=U[t++]<<r,r+=8,i+=U[t++]<<r,r+=8),e=C[i&B];;){if(o=e>>>24,i>>>=o,r-=o,0===(o=e>>>16&255))N[n++]=65535&e;else{if(!(16&o)){if(0==(64&o)){e=C[(65535&e)+(i&(1<<o)-1)];continue}if(32&o){I.mode=Ei;break n}D.msg="invalid literal/length code",I.mode=ki;break n}for(s=65535&e,(o&=15)&&(r<o&&(i+=U[t++]<<r,r+=8),s+=i&(1<<o)-1,i>>>=o,r-=o),r<15&&(i+=U[t++]<<r,r+=8,i+=U[t++]<<r,r+=8),e=H[i&q];;){if(o=e>>>24,i>>>=o,r-=o,!(16&(o=e>>>16&255))){if(0==(64&o)){e=H[(65535&e)+(i&(1<<o)-1)];continue}D.msg="invalid distance code",I.mode=ki;break n}if(Z=65535&e,o&=15,r<o&&(i+=U[t++]<<r,(r+=8)<o)&&(i+=U[t++]<<r,r+=8),M<(Z+=i&(1<<o)-1)){D.msg="invalid distance too far back",I.mode=ki;break n}if(i>>>=o,r-=o,Z>(o=n-P)){if((o=Z-o)>z&&I.sane){D.msg="invalid distance too far back",I.mode=ki;break n}if(u=0,f=T,0===x){if(u+=R-o,o<s){for(s-=o;N[n++]=T[u++],--o;);u=n-Z,f=N}}else if(x<o){if(u+=R+x-o,(o-=x)<s){for(s-=o;N[n++]=T[u++],--o;);if(u=0,x<s){for(o=x,s-=o;N[n++]=T[u++],--o;);u=n-Z,f=N}}}else if(u+=x-o,o<s){for(s-=o;N[n++]=T[u++],--o;);u=n-Z,f=N}for(;2<s;)N[n++]=f[u++],N[n++]=f[u++],N[n++]=f[u++],s-=3;s&&(N[n++]=f[u++],1<s)&&(N[n++]=f[u++])}else{for(u=n-Z;N[n++]=N[u++],N[n++]=N[u++],N[n++]=N[u++],2<(s-=3););s&&(N[n++]=N[u++],1<s)&&(N[n++]=N[u++])}break}}break}}while(t<S&&n<j);s=r>>3,t-=s,r-=s<<3,i&=(1<<r)-1,D.next_in=t,D.next_out=n,D.avail_in=t<S?S-t+5:5-(t-S),D.avail_out=n<j?j-n+257:257-(n-j),I.hold=i,I.bits=r}o=c.next_out,r=c.output,u=c.avail_out,e=c.next_in,i=c.input,s=c.avail_in,f=n.hold,h=n.bits,n.mode===X&&(n.back=-1);break}for(n.back=0;d=n.lencode[f&(1<<n.lenbits)-1],w=d>>>24,b=d>>>16&255,y=65535&d,!(w<=h);){if(0===s)break t;s--,f+=i[e++]<<h,h+=8}if(b&&0==(240&b)){for(_=w,m=b,p=y;d=n.lencode[p+((f&(1<<_+m)-1)>>_)],w=d>>>24,b=d>>>16&255,y=65535&d,!(_+w<=h);){if(0===s)break t;s--,f+=i[e++]<<h,h+=8}f>>>=_,h-=_,n.back+=_}if(f>>>=w,h-=w,n.back+=w,n.length=y,0===b){n.mode=16205;break}if(32&b){n.back=-1,n.mode=X;break}if(64&b){c.msg="invalid literal/length code",n.mode=$;break}n.extra=15&b,n.mode=16201;case 16201:if(n.extra){for(A=n.extra;h<A;){if(0===s)break t;s--,f+=i[e++]<<h,h+=8}n.length+=f&(1<<n.extra)-1,f>>>=n.extra,h-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=16202;case 16202:for(;d=n.distcode[f&(1<<n.distbits)-1],w=d>>>24,b=d>>>16&255,y=65535&d,!(w<=h);){if(0===s)break t;s--,f+=i[e++]<<h,h+=8}if(0==(240&b)){for(_=w,m=b,p=y;d=n.distcode[p+((f&(1<<_+m)-1)>>_)],w=d>>>24,b=d>>>16&255,y=65535&d,!(_+w<=h);){if(0===s)break t;s--,f+=i[e++]<<h,h+=8}f>>>=_,h-=_,n.back+=_}if(f>>>=w,h-=w,n.back+=w,64&b){c.msg="invalid distance code",n.mode=$;break}n.offset=y,n.extra=15&b,n.mode=16203;case 16203:if(n.extra){for(A=n.extra;h<A;){if(0===s)break t;s--,f+=i[e++]<<h,h+=8}n.offset+=f&(1<<n.extra)-1,f>>>=n.extra,h-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){c.msg="invalid distance too far back",n.mode=$;break}n.mode=16204;case 16204:if(0===u)break t;if(v=l-u,n.offset>v){if((v=n.offset-v)>n.whave&&n.sane){c.msg="invalid distance too far back",n.mode=$;break}L=v>n.wnext?(v-=n.wnext,n.wsize-v):n.wnext-v,v>n.length&&(v=n.length),F=n.window}else F=r,L=o-n.offset,v=n.length;for(v>u&&(v=u),u-=v,n.length-=v;r[o++]=F[L++],--v;);0===n.length&&(n.mode=Ji);break;case 16205:if(0===u)break t;r[o++]=n.length,u--,n.mode=Ji;break;case 16206:if(n.wrap){for(;h<32;){if(0===s)break t;s--,f|=i[e++]<<h,h+=8}if(l-=u,c.total_out+=l,n.total+=l,4&n.wrap&&l&&(c.adler=n.check=(n.flags?K:Jt)(n.check,r,l,o-l)),l=u,4&n.wrap&&(n.flags?f:Xi(f))!==n.check){c.msg="incorrect data check",n.mode=$;break}f=0,h=0}n.mode=16207;case 16207:if(n.wrap&&n.flags){for(;h<32;){if(0===s)break t;s--,f+=i[e++]<<h,h+=8}if(4&n.wrap&&f!==(4294967295&n.total)){c.msg="incorrect length check",n.mode=$;break}f=0,h=0}n.mode=16208;case 16208:O=Li;break t;case $:O=Pi;break t;case 16210:return Mi;default:Gi;return W}return c.next_out=o,c.avail_out=u,c.next_in=e,c.avail_in=s,n.hold=f,n.bits=h,(n.wsize||l!==c.avail_out&&n.mode<$&&(n.mode<16206||t!==Ui))&&or(c,c.output,c.next_out,l-c.avail_out),a-=c.avail_in,l-=c.avail_out,c.total_in+=a,c.total_out+=l,n.total+=l,4&n.wrap&&l&&(c.adler=n.check=(n.flags?K:Jt)(n.check,r,l,c.next_out-l)),c.data_type=n.bits+(n.last?64:0)+(n.mode===X?128:0)+(n.mode===qi||16194===n.mode?256:0),O=(0==a&&0===l||t===Ui)&&O===Ii?zi:O},inflateEnd:t=>{var n;return Yi(t)?W:((n=t.state).window&&(n.window=null),t.state=null,Ii)},inflateGetHeader:(t,n)=>Yi(t)||0==(2&(t=t.state).wrap)?W:((t.head=n).done=!1,Ii),inflateSetDictionary:(t,n)=>{var i,r=n.length;return Yi(t)||0!==(i=t.state).wrap&&i.mode!==Bi?W:i.mode===Bi&&Jt(1,n,r,0)!==i.check?Pi:or(t,n,r,r)?(i.mode=16210,Mi):(i.havedict=1,Ii)},inflateInfo:"pako inflate (from Nodeca project)"};var sr=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};let ur=Object.prototype.toString,{Z_NO_FLUSH:fr,Z_FINISH:cr,Z_OK:hr,Z_STREAM_END:ar,Z_NEED_DICT:lr,Z_STREAM_ERROR:vr,Z_DATA_ERROR:dr,Z_MEM_ERROR:wr}=n;function br(t){this.options=Yn({chunkSize:65536,windowBits:15,to:""},t||{});var n=this.options,t=(n.raw&&0<=n.windowBits&&n.windowBits<16&&(n.windowBits=-n.windowBits,0===n.windowBits)&&(n.windowBits=-15),!(0<=n.windowBits&&n.windowBits<16)||t&&t.windowBits||(n.windowBits+=32),15<n.windowBits&&n.windowBits<48&&0==(15&n.windowBits)&&(n.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ei,this.strm.avail_out=0,k.inflateInit2(this.strm,n.windowBits));if(t!==hr)throw new Error(Kt[t]);if(this.header=new sr,k.inflateGetHeader(this.strm,this.header),n.dictionary&&("string"==typeof n.dictionary?n.dictionary=ni(n.dictionary):"[object ArrayBuffer]"===ur.call(n.dictionary)&&(n.dictionary=new Uint8Array(n.dictionary)),n.raw)&&(t=k.inflateSetDictionary(this.strm,n.dictionary))!==hr)throw new Error(Kt[t])}function yr(t,n){n=new br(n);if(n.push(t),n.err)throw n.msg||Kt[n.err];return n.result}br.prototype.push=function(t,n){var i,r,e,o=this.strm,s=this.options.chunkSize,u=this.options.dictionary;let f,c,h;if(this.ended)return!1;for(c=n===~~n?n:!0===n?cr:fr,"[object ArrayBuffer]"===ur.call(t)?o.input=new Uint8Array(t):o.input=t,o.next_in=0,o.avail_in=o.input.length;;){for(0===o.avail_out&&(o.output=new Uint8Array(s),o.next_out=0,o.avail_out=s),(f=k.inflate(o,c))===lr&&u&&((f=k.inflateSetDictionary(o,u))===hr?f=k.inflate(o,c):f===dr&&(f=lr));0<o.avail_in&&f===ar&&0<o.state.wrap&&0!==t[o.next_in];)k.inflateReset(o),f=k.inflate(o,c);switch(f){case vr:case dr:case lr:case wr:return this.onEnd(f),!(this.ended=!0)}if(h=o.avail_out,!o.next_out||0!==o.avail_out&&f!==ar||("string"===this.options.to?(i=ri(o.output,o.next_out),r=o.next_out-i,e=ii(o.output,i),o.next_out=r,o.avail_out=s-r,r&&o.output.set(o.output.subarray(i,i+r),0),this.onData(e)):this.onData(o.output.length===o.next_out?o.output:o.output.subarray(0,o.next_out))),f!==hr||0!==h){if(f===ar)return f=k.inflateEnd(this.strm),this.onEnd(f),this.ended=!0;if(0===o.avail_in)break}}return!0},br.prototype.onData=function(t){this.chunks.push(t)},br.prototype.onEnd=function(t){t===hr&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Vn(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var t=Oi.deflate,f={inflate:yr}.inflate,_r=t,mr=f,pr=function(t,s,u,f){return new(u=u||Promise)(function(i,n){function r(t){try{o(f.next(t))}catch(t){n(t)}}function e(t){try{o(f.throw(t))}catch(t){n(t)}}function o(t){var n;t.done?i(t.value):((n=t.value)instanceof u?n:new u(function(t){t(n)})).then(r,e)}o((f=f.apply(t,s||[])).next())})},gr=function(r,e){var o,s,u,f={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]},c={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function t(i){return function(t){var n=[i,t];if(o)throw new TypeError("Generator is already executing.");for(;f=c&&n[c=0]?0:f;)try{if(o=1,s&&(u=2&n[0]?s.return:n[0]?s.throw||((u=s.return)&&u.call(s),0):s.next)&&!(u=u.call(s,n[1])).done)return u;switch(s=0,(n=u?[2&n[0],u.value]:n)[0]){case 0:case 1:u=n;break;case 4:return f.label++,{value:n[1],done:!1};case 5:f.label++,s=n[1],n=[0];continue;case 7:n=f.ops.pop(),f.trys.pop();continue;default:if(!(u=0<(u=f.trys).length&&u[u.length-1])&&(6===n[0]||2===n[0])){f=0;continue}if(3===n[0]&&(!u||n[1]>u[0]&&n[1]<u[3]))f.label=n[1];else if(6===n[0]&&f.label<u[1])f.label=u[1],u=n;else{if(!(u&&f.label<u[2])){u[2]&&f.ops.pop(),f.trys.pop();continue}f.label=u[2],f.ops.push(n)}}n=e.call(r,f)}catch(t){n=[6,t],s=0}finally{o=u=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}}};function Or(e,o,s){return pr(this,void 0,void 0,function(){var n,i,r;return gr(this,function(t){switch(t.label){case 0:return n="",i=(t=>{t=t||32;for(var n="abcdefhijkmnprstwxyz0123456789",i=n.length,r="",e=0;e<t;e++)r+=n.charAt(Math.floor(Math.random()*i));return r})(16),[4,function(r){var e;return pr(this,void 0,void 0,function(){var n,i;return gr(this,function(t){switch(t.label){case 0:return n=(new TextEncoder).encode(r),[4,null==(e=crypto.subtle)?void 0:e.digest("SHA-256",n)];case 1:return n=t.sent(),i=Array.from(new Uint8Array(n)),[2,i.map(function(t){return t.toString(16).padStart(2,"0")}).join("")]}})})}("".concat(e).concat("DPIV9g5X2zvTD4Zj").concat(i).concat(s))];case 1:return(r=(r=t.sent()).toLocaleLowerCase())&&(r={ver:o,hash:r,nonce:i,expire:s},r=JSON.stringify(r),n=btoa(r)),[2,n]}})})}var kr=function(){return(kr=Object.assign||function(t){for(var n,i=1,r=arguments.length;i<r;i++)for(var e in n=arguments[i])Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t}).apply(this,arguments)},Er=function(t,s,u,f){return new(u=u||Promise)(function(i,n){function r(t){try{o(f.next(t))}catch(t){n(t)}}function e(t){try{o(f.throw(t))}catch(t){n(t)}}function o(t){var n;t.done?i(t.value):((n=t.value)instanceof u?n:new u(function(t){t(n)})).then(r,e)}o((f=f.apply(t,s||[])).next())})},Ar=function(r,e){var o,s,u,f={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]},c={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function t(i){return function(t){var n=[i,t];if(o)throw new TypeError("Generator is already executing.");for(;f=c&&n[c=0]?0:f;)try{if(o=1,s&&(u=2&n[0]?s.return:n[0]?s.throw||((u=s.return)&&u.call(s),0):s.next)&&!(u=u.call(s,n[1])).done)return u;switch(s=0,(n=u?[2&n[0],u.value]:n)[0]){case 0:case 1:u=n;break;case 4:return f.label++,{value:n[1],done:!1};case 5:f.label++,s=n[1],n=[0];continue;case 7:n=f.ops.pop(),f.trys.pop();continue;default:if(!(u=0<(u=f.trys).length&&u[u.length-1])&&(6===n[0]||2===n[0])){f=0;continue}if(3===n[0]&&(!u||n[1]>u[0]&&n[1]<u[3]))f.label=n[1];else if(6===n[0]&&f.label<u[1])f.label=u[1],u=n;else{if(!(u&&f.label<u[2])){u[2]&&f.ops.pop(),f.trys.pop();continue}f.label=u[2],f.ops.push(n)}}n=e.call(r,f)}catch(t){n=[6,t],s=0}finally{o=u=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}}},Sr=function(t,n,i){if(i||2===arguments.length)for(var r,e=0,o=n.length;e<o;e++)!r&&e in n||((r=r||Array.prototype.slice.call(n,0,e))[e]=n[e]);return t.concat(r||Array.prototype.slice.call(n))},jr=(Object.defineProperty(E.prototype,"url",{get:function(){return this.T.url},set:function(t){this.T.url=t},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"strategy",{get:function(){return this.Z.strategy},enumerable:!1,configurable:!0}),E.prototype.setStrategy=function(t){this.Z.setStrategy(t),this.U=this.Z.build()},E.prototype.addRemoteWsLog=function(t){var n;if(this.T.env!=o.BROWSER)throw new Error("cannot use net strategy on  mini program");for(this.closed()&&(n=this.url,this.url="",this.openWebSocketLogServer(n)),this.N.push(t);this.N.size()>this.N.logCacheMax;)this.N.pop();this.connected()&&this.U&&this.U.active()},E.prototype.stopWebSocketServer=function(){this.clearHbTimer(),this.D=void 0,this.g&&(this.g.onclose=null,this.g.onerror=null,this.g.close(),this.g=null)},E.prototype.I=function(){this.g&&this.T.useStrategy&&(this.Z.setCache(this.N),this.U=this.Z.build())},E.prototype.L=function(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var r=this.F=this.P,e="";switch(t){case"onconnecting":"never_opened"===this.P?this.P="first_connecting":this.P="reconnecting";break;case"onopen":this.P="connected",this.onSocketConnect();break;case"onclosed":this.P="closed";var o=n[0];o&&(e+=" close code=".concat(o.code));break;case"onerror":this.P="error"}t=z.WEBSOCKET_STATE_CHANGE+" log ws state change: ".concat(r," -> ").concat(this.P);e&&(t+=e),"error"===this.P?this.M.warn(t):this.M.info(t)},E.prototype.onSocketConnect=function(){},E.prototype.openWebSocketLogServer=function(t,n,i){var r=this;void 0===n&&(n=!1),((i=void 0===i?!1:i)||this.url!=t)&&((this.url&&""!==this.url||"never_opened"===this.P)&&this.M.info(z.OPEN_WS+" log url change to: ".concat(t)),this.url=t)&&(i=function(){r.C&&(clearTimeout(r.C),r.C=null),r.stopWebSocketServer(),r.g=F(t,r.T.env,r.H),r.g instanceof WebSocket&&(r.g.binaryType="arraybuffer"),r.I(),r.L("onconnecting"),r.g.onopen=function(){var t;r.B=!1,r.D=void 0,r.T.useStrategy&&null!=(t=r.U)&&t.active(),r.L("onopen")},r.g.onclose=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];r.B=!1,r.L.apply(r,Sr(["onclosed"],t,!1))},r.g.onmessage=r.q.bind(r),r.g.onerror=function(){for(var t=0;t<arguments.length;t++)t,0;r.L("onerror")}},n?i():(n="error"===this.P||"error"===this.F,this.C||(this.C=setTimeout(i,n?5e3:3e3))))},E.prototype.closed=function(){return null==this.g||2==this.g.readyState||3==this.g.readyState},E.prototype.connected=function(){return null!==this.g&&1==this.g.readyState},E.prototype.connecting=function(){return null!==this.g&&0==this.g.readyState},Object.defineProperty(E.prototype,"canSendWs",{get:function(){var t=this.D,t=!t||performance.now()-t<2e4;return!(!this.g||1!==this.g.readyState)&&t},enumerable:!1,configurable:!0}),E.prototype.sendLogFrame=function(i){var r;return Er(this,void 0,void 0,function(){var n;return Ar(this,function(t){switch(t.label){case 0:return[4,this.makeLogFrame(i)];case 1:return n=t.sent(),null!=(r=this.g)&&r.send(n),[2]}})})},E.prototype.makeLogFrame=function(c){return Er(this,void 0,void 0,function(){var n,i,r,e,o,s,u,f;return Ar(this,function(t){switch(t.label){case 0:return(n=_r(c),r=this.T,i=r.appid,r=r.userid,e=this.seq++,o=[{}],this.B)?(s={},[3,3]):[3,1];case 1:return f={appid:i,product:2,id_name:r,timestamp:Math.floor(Date.now()/1e3)},[4,function(r){return pr(this,void 0,void 0,function(){var n,i;return gr(this,function(t){switch(t.label){case 0:return n="",i=Math.floor((Date.now()+7776e6)/1e3),[4,Or(r,2,i)];case 1:return i=t.sent(),[2,n=0<i.length?i:n]}})})}(i)];case 2:f.litesign=t.sent(),s=f,t.label=3;case 3:return u=kr.apply(void 0,[kr.apply(void 0,o.concat([s])),{detail_data:n}]),u=Q.rtcreport.DetailLogRequest.encode(u).finish(),this.B=!0,[2,this.J(e,7,u)]}})})},E.prototype.J=function(t,n,i){var r=(null==i?void 0:i.length)||0,e=new Uint8Array(10+r);return e[0]=64,e[1]=n,e[2]=t>>24&255,e[3]=t>>16&255,e[4]=t>>8&255,e[5]=255&t,e[6]=r>>24&255,e[7]=r>>16&255,e[8]=r>>8&255,e[9]=255&r,i&&e.set(i,10),e},E.prototype.q=function(t){var t=new Uint8Array(t.data),n=t[0];this.D=performance.now(),this.startHbTimer(),64===n&&8===t[1]&&(t[2],t[3],t[4],t[5],n=t[6]<<24|t[7]<<16|t[8]<<8|t[9],t=new Uint8Array(t.slice(10,10+n)),101===Q.rtcreport.DetailLogResponse.decode(t).code)&&(this.B=!1)},E.prototype.clearLogCacheAndUpload=function(){var n=this;this.connected()&&this.N.clear().forEach(function(t){n.sendLogFrame(t)})},E.prototype.clearHbTimer=function(){this.checkHbTimer&&(clearTimeout(this.checkHbTimer),this.checkHbTimer=void 0)},E.prototype.startHbTimer=function(){var n=this;this.clearHbTimer(),void 0!==this.D&&6e4<performance.now()-this.D?this.openWebSocketLogServer(this.url,!0,!0):this.checkHbTimer=setTimeout(function(){var t;n.g&&(t=n.J(n.seq++,5),n.g.send(t),n.startHbTimer())},2e4)},E.prototype.destroy=function(){this.g=null},E);function E(t,n,i,r){this.N=t,this.T=n,this.M=i,this.H=r,this.g=null,this.P="never_opened",this.F="never_opened",this.Z=new Yr(this),this.U=null,this.B=!1,this.C=null,this.seq=1,this.D=void 0,this.checkHbTimer=void 0}xr.prototype.active=function(){var n=this;this.G.canSendWs&&0!==this.N.size()&&this.K.canSendLog()&&(this.K.getLog().forEach(function(t){n.G.sendLogFrame(t)}),this.K.onSendLog())};var Rr=xr;function xr(t,n,i){this.G=t,this.N=n,this.K=i,this.K.onCanSendActive=this.active.bind(this)}function Tr(t){this.cache=t}Zr=function(t,n){return(Zr=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,n){t.__proto__=n}:function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}))(t,n)};(function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}Zr(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)})(Dr,Ur=Tr),Dr.prototype.getLog=function(){return this.cache.clear()},Dr.prototype.canSendLog=function(){return 0<this.cache.size()},Dr.prototype.onSendLog=function(){};var Zr,Ur,Nr=Dr;function Dr(t){return Ur.call(this,t)||this}Ir=function(t,n){return(Ir=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,n){t.__proto__=n}:function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}))(t,n)};(function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}Ir(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)})(Fr,Lr=Tr),Fr.prototype.canSendLog=function(){return!this.locked&&0<this.cache.size()},Fr.prototype.getLog=function(){for(var t=[],n=0;n<this.maxPacketLen-4e3;){var i=this.cache.getOneLogPacket();if(!i||i.length<=0)break;n+=i.length||0,t.push(i)}return t},Fr.prototype.onSendLog=function(){var t=this;this.locked=!0,setTimeout(function(){t.locked=!1,t.onCanSendActive&&t.onCanSendActive()},this.maxDelay)};var Ir,Lr,n=Fr;function Fr(){var t=null!==Lr&&Lr.apply(this,arguments)||this;return t.maxDelay=10,t.maxPacketLen=20480,t.locked=!1,t}Pr=function(t,n){return(Pr=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,n){t.__proto__=n}:function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}))(t,n)};(function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}Pr(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)})(Cr,Mr=n);var Pr,Mr,zr=Cr;function Cr(t){t=Mr.call(this,t)||this;return t.maxDelay=10,t.maxPacketLen=20480,t}Hr=function(t,n){return(Hr=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,n){t.__proto__=n}:function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}))(t,n)};var Hr,Br;(function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}Hr(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)})(qr,Br=n);function qr(){return null!==Br&&Br.apply(this,arguments)||this}Jr=function(t,n){return(Jr=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,n){t.__proto__=n}:function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}))(t,n)};var Jr,Gr;(function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}Jr(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)})(Kr,Gr=n);function Kr(){return null!==Gr&&Gr.apply(this,arguments)||this}Wr=function(t,n){return(Wr=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,n){t.__proto__=n}:function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}))(t,n)};var Wr,Xr;(function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}Wr(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)})($r,Xr=n);function $r(){return null!==Xr&&Xr.apply(this,arguments)||this}Object.defineProperty(Vr.prototype,"strategy",{get:function(){return this.K},enumerable:!1,configurable:!0}),Vr.prototype.setCache=function(t){this.N=t},Vr.prototype.setStrategy=function(t){t&&(this.K=t)},Vr.prototype.build=function(){if(this.N)return this.K!==N.DEFAULT?new Rr(this.G,this.N,new Nr(this.N)):new Rr(this.G,this.N,new zr(this.N));throw new Error("cannot build log sender")};var Yr=Vr;function Vr(t){this.G=t,this.K=N.DEFAULT}A.W=function(){return!(!window||!window.localStorage)},A.bin2hex=function(t){for(var n,i="",r=0,e=(t+="").length;r<e;r++)i+=(n=t.charCodeAt(r).toString(16)).length<2?"0"+n:n;return i},A.getCanvasFingerprint=function(t){var n=document.createElement("canvas"),i=n.getContext("2d"),i=(i.textBaseline="top",i.font="14px 'Arial'",i.fillStyle="#f60",i.fillRect(125,1,62,20),i.fillStyle="#069",i.fillText(t,2,15),i.fillStyle="rgba(102, 204, 0, 0.7)",i.fillText(t,4,17),n.toDataURL().replace("data:image/png;base64,","")),t=atob(i);return this.bin2hex(t.slice(-16,-12))},A.generateUUID=function(){var i,t,n=localStorage.getItem(this.X);return n||(i=(new Date).getTime(),n="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(i+16*Math.random())%16|0;return i=Math.floor(i/16),("x"==t?n:3&n|8).toString(36)}),t=this.getCanvasFingerprint("hello, zego")+n.slice(8),localStorage.setItem(this.X,t),n)},A.id=function(){var t;return A.W()?((t=localStorage.getItem(this.X))||(t=A.generateUUID(),localStorage.setItem(this.X,t)),t):""},A.X="z_deviceID";var Qr=A;function A(){}var te=function(){this.url="",this.bakURL="",this.env=o.BROWSER,this.useStrategy=!0,this.token="",this.deviceid=Qr.id()};Object.defineProperty(ne.prototype,"buffer",{get:function(){return this.queue},set:function(t){this.queue=t},enumerable:!1,configurable:!0}),ne.prototype.push=function(t){if(!t)throw new Error("item null!");t&&this.queue.push(t)},ne.prototype.pop=function(){return this.queue.shift()},ne.prototype.front=function(){return this.queue[0]},ne.prototype.clear=function(){this.queue=[]};t=ne;function ne(){this.queue=[]}ie=function(t,n){return(ie=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,n){t.__proto__=n}:function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}))(t,n)};var ie,re,ee=function(){return(ee=Object.assign||function(t){for(var n,i=1,r=arguments.length;i<r;i++)for(var e in n=arguments[i])Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t}).apply(this,arguments)},oe=(function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}ie(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}(se,re=t),se.prototype.size=function(){return this.queue.length},se.prototype.getOneLogPacket=function(){var t=[],n=0,i="";if(this.size()){var r=JSON.parse(this.queue[this.queue.length-1]).userid,e=this.T.userid||r;if(e){for(;0<this.queue.length;){var o=this.queue[0].length;if(n&&4096<n+o)return i=JSON.stringify(t);var s=JSON.parse(this.queue[0]),s=ee(ee({},s),{userid:s.userid||e,roomid:s.roomid||this.T.roomid});n+=o,t.push(s),this.queue.shift()}return""===(i=JSON.stringify(t))?void 0:i}}},se.prototype.clear=function(){for(var t=[];0<this.queue.length;){var n=this.getOneLogPacket();if(!n)break;t.push(n)}return t},se);function se(t,n){void 0===n&&(n=1/0);var i=re.call(this)||this;return i.logCacheMax=n,i.T=t,i}var ue=function(t,s,u,f){return new(u=u||Promise)(function(i,n){function r(t){try{o(f.next(t))}catch(t){n(t)}}function e(t){try{o(f.throw(t))}catch(t){n(t)}}function o(t){var n;t.done?i(t.value):((n=t.value)instanceof u?n:new u(function(t){t(n)})).then(r,e)}o((f=f.apply(t,s||[])).next())})},fe=function(r,e){var o,s,u,f={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]},c={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function t(i){return function(t){var n=[i,t];if(o)throw new TypeError("Generator is already executing.");for(;f=c&&n[c=0]?0:f;)try{if(o=1,s&&(u=2&n[0]?s.return:n[0]?s.throw||((u=s.return)&&u.call(s),0):s.next)&&!(u=u.call(s,n[1])).done)return u;switch(s=0,(n=u?[2&n[0],u.value]:n)[0]){case 0:case 1:u=n;break;case 4:return f.label++,{value:n[1],done:!1};case 5:f.label++,s=n[1],n=[0];continue;case 7:n=f.ops.pop(),f.trys.pop();continue;default:if(!(u=0<(u=f.trys).length&&u[u.length-1])&&(6===n[0]||2===n[0])){f=0;continue}if(3===n[0]&&(!u||n[1]>u[0]&&n[1]<u[3]))f.label=n[1];else if(6===n[0]&&f.label<u[1])f.label=u[1],u=n;else{if(!(u&&f.label<u[2])){u[2]&&f.ops.pop(),f.trys.pop();continue}f.label=u[2],f.ops.push(n)}}n=e.call(r,f)}catch(t){n=[6,t],s=0}finally{o=u=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}}},ce=(he.prototype.save=function(t){return this.Y.save(this.V,{log:t})},he.prototype.queryList=function(t){return this.Y.queryByCursor(this.V,t)},he.prototype.delete=function(t){return this.Y.deleteItems(this.V,t)},he.prototype.storedBytesSize=function(){var t=this;return new Promise(function(r,e){return ue(t,void 0,void 0,function(){var n,i;return fe(this,function(t){return n=this.Y.openCursor(this.V),i=0,n.onsuccess=function(t){var n,t=null==(t=t.target)?void 0:t.result;t?(n=t.value,i+=n.log.length,t.continue()):r(i)},n.onerror=function(t){e(t)},[2]})})})},he.prototype.lines=function(){return this.Y.lines(this.V)},he.prototype.deleteByCount=function(t){return this.Y.deleteByCount(this.V,t)},he.prototype.deleteAll=function(){return this.Y.deleteAll(this.V)},he);function he(t){this.Y=t,this.V="zego_log"}var S=function(t,s,u,f){return new(u=u||Promise)(function(i,n){function r(t){try{o(f.next(t))}catch(t){n(t)}}function e(t){try{o(f.throw(t))}catch(t){n(t)}}function o(t){var n;t.done?i(t.value):((n=t.value)instanceof u?n:new u(function(t){t(n)})).then(r,e)}o((f=f.apply(t,s||[])).next())})},ae=function(r,e){var o,s,u,f={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]},c={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function t(i){return function(t){var n=[i,t];if(o)throw new TypeError("Generator is already executing.");for(;f=c&&n[c=0]?0:f;)try{if(o=1,s&&(u=2&n[0]?s.return:n[0]?s.throw||((u=s.return)&&u.call(s),0):s.next)&&!(u=u.call(s,n[1])).done)return u;switch(s=0,(n=u?[2&n[0],u.value]:n)[0]){case 0:case 1:u=n;break;case 4:return f.label++,{value:n[1],done:!1};case 5:f.label++,s=n[1],n=[0];continue;case 7:n=f.ops.pop(),f.trys.pop();continue;default:if(!(u=0<(u=f.trys).length&&u[u.length-1])&&(6===n[0]||2===n[0])){f=0;continue}if(3===n[0]&&(!u||n[1]>u[0]&&n[1]<u[3]))f.label=n[1];else if(6===n[0]&&f.label<u[1])f.label=u[1],u=n;else{if(!(u&&f.label<u[2])){u[2]&&f.ops.pop(),f.trys.pop();continue}f.label=u[2],f.ops.push(n)}}n=e.call(r,f)}catch(t){n=[6,t],s=0}finally{o=u=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}}},le=(j.prototype.openDB=function(e){return S(this,void 0,void 0,function(){var i,n,r=this;return ae(this,function(t){switch(t.label){case 0:return i=window.indexedDB.open(e.database,e.version),n=this,[4,new Promise(function(n){i.onupgradeneeded=function(t){var i=t.target&&t.target.result;e.tableList.forEach(function(t){var n;i.objectStoreNames.contains(t.tableName)||(n=i.createObjectStore(t.tableName,{keyPath:"id",autoIncrement:!0}),t.tableItems.forEach(function(t){t.index&&n.createIndex(t.itemName,t.itemName,{unique:t.unique})}))})},i.onsuccess=function(t){t=t.target&&t.target.result;r.tt=t,n(i)}})];case 1:return n.nt=t.sent(),[2]}})})},j.prototype.it=function(){if(!this.nt&&!this.tt)throw new Error("indexDB not open")},j.prototype.save=function(o,s){var t=this;return new Promise(function(r,e){return S(t,void 0,void 0,function(){var n,i;return ae(this,function(t){return this.it(),n=this.tt.transaction([o],"readwrite").objectStore(o),(i=n.add(s)).onsuccess=function(t){r(i.result)},i.onerror=function(t){e("save item fail")},[2]})})})},j.prototype.update=function(t,n){var i=this;return new Promise(function(t,n){i.it(),t()})},j.prototype.queryById=function(o,s){var t=this;return new Promise(function(r,e){return S(t,void 0,void 0,function(){var n,i;return ae(this,function(t){return this.it(),n=this.tt.transaction([o]).objectStore(o),(i=n.get(s)).onsuccess=function(t){i.result?r(i.result):r(null)},i.onerror=function(t){e()},[2]})})})},j.prototype.queryByCursor=function(o,s){var t=this;return new Promise(function(r,e){return S(t,void 0,void 0,function(){var n,i;return ae(this,function(t){return this.it(),i=this.tt.transaction([o]).objectStore(o),n=[],(i=i.openCursor()).onsuccess=function(t){t=null==(t=t.target)?void 0:t.result;t&&(!s||n.length<s)?(n.push(t.value),t.continue()):r(n)},i.onerror=function(t){e()},[2]})})})},j.prototype.lines=function(o){var t=this;return new Promise(function(r,e){return S(t,void 0,void 0,function(){var n,i;return ae(this,function(t){return this.it(),n=this.tt.transaction([o]).objectStore(o),n=n.openCursor(),i=0,n.onsuccess=function(t){t=null==(t=t.target)?void 0:t.result;t?(i++,t.continue()):r(i)},n.onerror=function(t){e()},[2]})})})},j.prototype.openCursor=function(t){return this.it(),this.tt.transaction([t]).objectStore(t).openCursor()},j.prototype.deleteById=function(e,o){var t=this;return new Promise(function(i,r){return S(t,void 0,void 0,function(){var n;return ae(this,function(t){return this.it(),n=this.tt.transaction([e],"readwrite").objectStore(e),(n=n.delete(o)).onsuccess=function(t){i()},n.onerror=function(t){r()},[2]})})})},j.prototype.deleteByCount=function(e,o){var n=this;return new Promise(function(r,t){return S(n,void 0,void 0,function(){var n,i;return ae(this,function(t){switch(t.label){case 0:this.it(),n=8192,t.label=1;case 1:return 0<o?[4,this.queryByCursor(e,Math.min(o,n))]:[3,4];case 2:return 0===(i=t.sent()).length?[3,4]:(o-=n,[4,this.deleteItems(e,i)]);case 3:return t.sent(),[3,1];case 4:return r(),[2]}})})})},j.prototype.deleteAll=function(e){var t=this;return new Promise(function(i,r){return S(t,void 0,void 0,function(){var n;return ae(this,function(t){return this.it(),n=this.tt.transaction([e],"readwrite").objectStore(e),(n=n.clear()).onsuccess=function(t){i()},n.onerror=function(t){r()},[2]})})})},j.prototype.deleteItems=function(i,r){var t=this;return new Promise(function(n){return S(t,void 0,void 0,function(){var e;return ae(this,function(t){switch(t.label){case 0:return this.it(),e=this.tt.transaction([i],"readwrite").objectStore(i),[4,Promise.all(r.map(function(r){return new Promise(function(n,i){var t=e.delete(r.id);t.onsuccess=function(t){n()},t.onerror=function(t){i()}})}))];case 1:return t.sent(),n(),[2]}})})})},j);function j(){}var ve={version:1,database:"zego_logger_db",tableList:[{tableName:"zego_log",tableItems:[{itemName:"log",index:!1,unique:!1}]}]};de=function(t,n){return(de=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,n){t.__proto__=n}:function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}))(t,n)};(function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}de(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)})(ye,we=t);var de,we,be=ye;function ye(){return null!==we&&we.apply(this,arguments)||this}var _e=function(){return(_e=Object.assign||function(t){for(var n,i=1,r=arguments.length;i<r;i++)for(var e in n=arguments[i])Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t}).apply(this,arguments)},me=function(t,s,u,f){return new(u=u||Promise)(function(i,n){function r(t){try{o(f.next(t))}catch(t){n(t)}}function e(t){try{o(f.throw(t))}catch(t){n(t)}}function o(t){var n;t.done?i(t.value):((n=t.value)instanceof u?n:new u(function(t){t(n)})).then(r,e)}o((f=f.apply(t,s||[])).next())})},pe=function(r,e){var o,s,u,f={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]},c={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function t(i){return function(t){var n=[i,t];if(o)throw new TypeError("Generator is already executing.");for(;f=c&&n[c=0]?0:f;)try{if(o=1,s&&(u=2&n[0]?s.return:n[0]?s.throw||((u=s.return)&&u.call(s),0):s.next)&&!(u=u.call(s,n[1])).done)return u;switch(s=0,(n=u?[2&n[0],u.value]:n)[0]){case 0:case 1:u=n;break;case 4:return f.label++,{value:n[1],done:!1};case 5:f.label++,s=n[1],n=[0];continue;case 7:n=f.ops.pop(),f.trys.pop();continue;default:if(!(u=0<(u=f.trys).length&&u[u.length-1])&&(6===n[0]||2===n[0])){f=0;continue}if(3===n[0]&&(!u||n[1]>u[0]&&n[1]<u[3]))f.label=n[1];else if(6===n[0]&&f.label<u[1])f.label=u[1],u=n;else{if(!(u&&f.label<u[2])){u[2]&&f.ops.pop(),f.trys.pop();continue}f.label=u[2],f.ops.push(n)}}n=e.call(r,f)}catch(t){n=[6,t],s=0}finally{o=u=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}}},ge=(Oe.prototype.pushTask=function(t,n,i,r,e){t={task:t};n&&(t=_e(_e({},t),{args:n})),i&&(t=_e(_e({},t),{successCallback:i})),r&&(t=_e(_e({},t),{errorCallback:r})),e&&(t=_e(_e({},t),{completeCallback:e})),this.rt.push(t)},Oe.prototype.et=function(r){return me(this,void 0,void 0,function(){var n,i;return pe(this,function(t){switch(t.label){case 0:n=null,t.label=1;case 1:return(t.trys.push([1,4,5,6]),r&&r.args?n=r.task.apply(r,r.args):r&&(n=r.task()),n instanceof Promise)?[4,n]:[3,3];case 2:n=t.sent(),t.label=3;case 3:return r.successCallback&&r.successCallback(n),[3,6];case 4:if(i=t.sent(),r.errorCallback)return r.errorCallback(i),[3,6];throw i;case 5:return r.completeCallback&&r.completeCallback(),[7];case 6:return[2]}})})},Oe.prototype.runATask=function(){return me(this,void 0,void 0,function(){var n;return pe(this,function(t){switch(t.label){case 0:return this.rt.length<=0?[2]:(n=this.rt.shift(),n?[4,this.et(n)]:[3,2]);case 1:t.sent(),t.label=2;case 2:return[2]}})})},Oe.prototype.runAllTask=function(){return me(this,void 0,void 0,function(){var n;return pe(this,function(t){switch(t.label){case 0:return 0<this.rt.length?(n=this.rt.shift(),n?[4,this.et(n)]:[3,2]):[3,3];case 1:t.sent(),t.label=2;case 2:return[3,0];case 3:return[2]}})})},Oe.prototype.size=function(){return this.rt.length},Oe);function Oe(){this.rt=[]}Ee.prototype.writeLine=function(t){t&&""!==t&&this.ot.push(t)},Ee.prototype.saveAs=function(t,n){var i=document.createElement("a");i.href=URL.createObjectURL(t),i.download=n,i.click()},Ee.prototype.createZip=function(){var t="";0<this.ot.length&&(t=this.ot.join("\n"),this.ot=[]);t=(t=>{for(var n,i=0,r=t.length,e="";i<r;)n=t.subarray(i,Math.min(i+32768,r)),e+=String.fromCharCode.apply(null,Array.from(n)),i+=32768;return btoa(e)})(_r(t));return new Blob([t],{type:"text/plain;charset=utf-8"})};var ke=Ee;function Ee(){this.ot=[]}var Ae=function(t,s,u,f){return new(u=u||Promise)(function(i,n){function r(t){try{o(f.next(t))}catch(t){n(t)}}function e(t){try{o(f.throw(t))}catch(t){n(t)}}function o(t){var n;t.done?i(t.value):((n=t.value)instanceof u?n:new u(function(t){t(n)})).then(r,e)}o((f=f.apply(t,s||[])).next())})},Se=function(r,e){var o,s,u,f={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]},c={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function t(i){return function(t){var n=[i,t];if(o)throw new TypeError("Generator is already executing.");for(;f=c&&n[c=0]?0:f;)try{if(o=1,s&&(u=2&n[0]?s.return:n[0]?s.throw||((u=s.return)&&u.call(s),0):s.next)&&!(u=u.call(s,n[1])).done)return u;switch(s=0,(n=u?[2&n[0],u.value]:n)[0]){case 0:case 1:u=n;break;case 4:return f.label++,{value:n[1],done:!1};case 5:f.label++,s=n[1],n=[0];continue;case 7:n=f.ops.pop(),f.trys.pop();continue;default:if(!(u=0<(u=f.trys).length&&u[u.length-1])&&(6===n[0]||2===n[0])){f=0;continue}if(3===n[0]&&(!u||n[1]>u[0]&&n[1]<u[3]))f.label=n[1];else if(6===n[0]&&f.label<u[1])f.label=u[1],u=n;else{if(!(u&&f.label<u[2])){u[2]&&f.ops.pop(),f.trys.pop();continue}f.label=u[2],f.ops.push(n)}}n=e.call(r,f)}catch(t){n=[6,t],s=0}finally{o=u=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}}},je=(Re.prototype.st=function(){return!!(this.T.appid&&this.T.userid&&""!==this.T.userid&&this.T.token&&""!==this.T.token&&this.T.deviceid&&""!==this.T.deviceid)},Re.prototype.setUploadUrl=function(t){this.ut=t},Re.prototype.upload=function(o){return Ae(this,void 0,void 0,function(){var n=this;return Se(this,function(t){if(this.st())return[2,new Promise(function(r,e){return Ae(n,void 0,void 0,function(){var n,i=this;return Se(this,function(t){switch(t.label){case 0:return(n=function(){return Ae(i,void 0,void 0,function(){var n,i,r=this;return Se(this,function(t){switch(t.label){case 0:this.ft=!0,(n=new FormData).append("logs",o),n.append("hello",this.T.appid.toString()),n.append("appid",this.T.appid.toString()),n.append("uin",this.T.userid.toString()),n.append("timestamp",(new Date).getTime().toString()),n.append("token",this.T.token),n.append("deviceid",this.T.deviceid),t.label=1;case 1:return t.trys.push([1,3,4,5]),[4,Ze.post(this.ut,n,this.proxyCtrl)];case 2:if(0!==(i=t.sent()).code)throw new Error("upload logs failed, error=".concat(JSON.stringify(i)));return[3,5];case 3:return i=t.sent(),e(i),[3,5];case 4:return setTimeout(function(){return Ae(r,void 0,void 0,function(){return Se(this,function(t){switch(t.label){case 0:return this.ft=!1,[4,this.ct.runATask()];case 1:return t.sent(),[2]}})})},100),[7];case 5:return[2]}})})},this.ft)?(this.ct.pushTask(n,[],function(){r()},function(t){e(t)}),[3,3]):[3,1];case 1:return[4,n()];case 2:t.sent(),r(),t.label=3;case 3:return[2]}})})})];throw new Error("cannot upload logs, please login room before you upload logs.")})})},Re);function Re(t,n){this.T=t,this.proxyCtrl=n,this.ht="detaillog-global.zego.im",this.ut="https://".concat(this.ht,"/log/userupload"),this.ct=new ge,this.ft=!1}var xe=function(t,s,u,f){return new(u=u||Promise)(function(i,n){function r(t){try{o(f.next(t))}catch(t){n(t)}}function e(t){try{o(f.throw(t))}catch(t){n(t)}}function o(t){var n;t.done?i(t.value):((n=t.value)instanceof u?n:new u(function(t){t(n)})).then(r,e)}o((f=f.apply(t,s||[])).next())})},Te=function(r,e){var o,s,u,f={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]},c={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function t(i){return function(t){var n=[i,t];if(o)throw new TypeError("Generator is already executing.");for(;f=c&&n[c=0]?0:f;)try{if(o=1,s&&(u=2&n[0]?s.return:n[0]?s.throw||((u=s.return)&&u.call(s),0):s.next)&&!(u=u.call(s,n[1])).done)return u;switch(s=0,(n=u?[2&n[0],u.value]:n)[0]){case 0:case 1:u=n;break;case 4:return f.label++,{value:n[1],done:!1};case 5:f.label++,s=n[1],n=[0];continue;case 7:n=f.ops.pop(),f.trys.pop();continue;default:if(!(u=0<(u=f.trys).length&&u[u.length-1])&&(6===n[0]||2===n[0])){f=0;continue}if(3===n[0]&&(!u||n[1]>u[0]&&n[1]<u[3]))f.label=n[1];else if(6===n[0]&&f.label<u[1])f.label=u[1],u=n;else{if(!(u&&f.label<u[2])){u[2]&&f.ops.pop(),f.trys.pop();continue}f.label=u[2],f.ops.push(n)}}n=e.call(r,f)}catch(t){n=[6,t],s=0}finally{o=u=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}}},Ze=(Ue.post=function(e,o,s){var t=this;return new Promise(function(i,r){return xe(t,void 0,void 0,function(){var n;return Te(this,function(t){try{s?s.startHttpRequest({location:e,body:o,method_no:2,headers:[{name:"Content-Type",val:"multipart/form-data"}],serviceType:2},function(t){200===t.status_code?i(t.body):r("request fail. status="+t.status_code)},function(t){r("request fail. result: "+JSON.stringify(t))}):((n=new XMLHttpRequest).open("POST",e,!0),n.responseType="json",n.send(o),n.onreadystatechange=function(){n.readyState===XMLHttpRequest.DONE&&(200===n.status?i(n.response):r("request fail. status="+n.status))})}catch(t){r(t)}return[2]})})})},Ue);function Ue(){}var Ne=function(){return(Ne=Object.assign||function(t){for(var n,i=1,r=arguments.length;i<r;i++)for(var e in n=arguments[i])Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t}).apply(this,arguments)},De=(Ie.prototype.build=function(t){var n=Ne(Ne({},JSON.parse(t)),{sdkid:this.lt});if(++this.vt%100==0)return(t=JSON.stringify(n)).substring(1,t.length-1);for(i in n)this.dt.includes(i)||(n[i]===this.wt[i]?delete n[i]:this.wt[i]=n[i]);var i,r=[];for(i in n)this.dt.includes(i)?r.push(n[i]):r.push("".concat(i,":").concat(n[i]));return r.join(",")},Ie.prototype.buildFullMessageLog=function(t){t=JSON.parse(t),t=Ne(Ne(Ne({},this.wt),t),{sdkid:this.lt});return JSON.stringify(t)},Ie);function Ie(t){this.T=t,this.wt={},this.dt=["time","action","content","sdkid"],this.vt=0,this.lt=(t=5,crypto.getRandomValues(new Uint8Array(t)).reduce((t,n)=>t+=(n&=63)<36?n.toString(36):n<62?(n-26).toString(36).toUpperCase():62<n?"-":"_",""))}var R=function(t,s,u,f){return new(u=u||Promise)(function(i,n){function r(t){try{o(f.next(t))}catch(t){n(t)}}function e(t){try{o(f.throw(t))}catch(t){n(t)}}function o(t){var n;t.done?i(t.value):((n=t.value)instanceof u?n:new u(function(t){t(n)})).then(r,e)}o((f=f.apply(t,s||[])).next())})},x=function(r,e){var o,s,u,f={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]},c={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function t(i){return function(t){var n=[i,t];if(o)throw new TypeError("Generator is already executing.");for(;f=c&&n[c=0]?0:f;)try{if(o=1,s&&(u=2&n[0]?s.return:n[0]?s.throw||((u=s.return)&&u.call(s),0):s.next)&&!(u=u.call(s,n[1])).done)return u;switch(s=0,(n=u?[2&n[0],u.value]:n)[0]){case 0:case 1:u=n;break;case 4:return f.label++,{value:n[1],done:!1};case 5:f.label++,s=n[1],n=[0];continue;case 7:n=f.ops.pop(),f.trys.pop();continue;default:if(!(u=0<(u=f.trys).length&&u[u.length-1])&&(6===n[0]||2===n[0])){f=0;continue}if(3===n[0]&&(!u||n[1]>u[0]&&n[1]<u[3]))f.label=n[1];else if(6===n[0]&&f.label<u[1])f.label=u[1],u=n;else{if(!(u&&f.label<u[2])){u[2]&&f.ops.pop(),f.trys.pop();continue}f.label=u[2],f.ops.push(n)}}n=e.call(r,f)}catch(t){n=[6,t],s=0}finally{o=u=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}}},Le=(Object.defineProperty(T.prototype,"dbOpened",{get:function(){return this.bt},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"dbTryOpened",{get:function(){return this.yt},enumerable:!1,configurable:!0}),T.prototype._t=function(){return R(this,void 0,void 0,function(){var n;return x(this,function(t){switch(t.label){case 0:return[4,this.gt.lines()];case 1:return 153600<(n=t.sent())?[4,this.gt.deleteByCount(n/2)]:[3,3];case 2:t.sent(),t.label=3;case 3:return[2]}})})},T.prototype.makeStorageSpaceUpload=function(){return R(this,void 0,void 0,function(){var e,n=this;return x(this,function(t){return this.Ot?(e=function(){return R(n,void 0,void 0,function(){return x(this,function(t){switch(t.label){case 0:return[4,this.gt.lines()];case 1:return 3072<t.sent()?[4,this.kt()]:[3,3];case 2:t.sent(),t.label=3;case 3:return[2]}})})},[2,new Promise(function(i,r){return R(n,void 0,void 0,function(){var n;return x(this,function(t){switch(t.label){case 0:return this.dbOpened?[3,1]:(this.Et.pushTask(e,[],function(){i()},function(t){r(t)}),[3,5]);case 1:return t.trys.push([1,3,,4]),[4,e()];case 2:return t.sent(),[3,4];case 3:return n=t.sent(),r(n),[2];case 4:i(),t.label=5;case 5:return[2]}})})})]):[2]})})},T.prototype.openDB=function(){return R(this,void 0,void 0,function(){return x(this,function(t){switch(t.label){case 0:return this.yt?[2]:(this.yt=!0,[4,this.Y.openDB(ve)]);case 1:return t.sent(),this.bt=!0,[4,this._t()];case 2:return t.sent(),[4,this.Et.runAllTask()];case 3:return t.sent(),[4,this.At.runATask()];case 4:return t.sent(),this.St(),[2]}})})},T.prototype.jt=function(){return this.Ot&&T.isEnvSupport()&&!this.bt&&!this.yt},T.prototype.enable=function(){this.Ot||(this.Ot=!0,this.jt()&&this.openDB())},T.prototype.saveLog=function(t){this.jt()&&this.openDB(),this.N.push(this.Rt.build(t)),this.St()},T.prototype.removeLogList=function(n){return R(this,void 0,void 0,function(){return x(this,function(t){switch(t.label){case 0:return 0===n.length?[2]:[4,this.gt.delete(n)];case 1:return t.sent(),[2]}})})},T.prototype.empty=function(){return R(this,void 0,void 0,function(){return x(this,function(t){switch(t.label){case 0:return[4,this.gt.queryList(1)];case 1:return[2,0===t.sent().length]}})})},T.prototype.St=function(){var n,i=this;this.Ot&&this.dbOpened&&!this.xt&&(this.xt=!0,(n=function(){var t=i.N.front();t?t&&i.gt.save(t).then(function(){i.N.pop(),n()}).catch(function(t){i.xt=!1,console.error(t)}):i.xt=!1})())},T.isEnvSupport=function(){return!!(window&&"indexedDB"in window)},T.prototype.Tt=function(){return R(this,void 0,void 0,function(){var e,o,n,s;return x(this,function(t){switch(t.label){case 0:return[4,this.gt.lines()];case 1:e=t.sent(),o=3145728,n=function(){var n,i,r;return x(this,function(t){switch(t.label){case 0:return[4,s.gt.queryList(Math.min(o,e))];case 1:return(n=t.sent(),e-=o,n.length<=0)?[2,"break"]:(i=new ke,n.forEach(function(t){i.writeLine(t.log)}),r=i.createZip(),[4,s.Zt.upload(r)]);case 2:return t.sent(),[4,s.gt.delete(n)];case 3:return t.sent(),[2]}})},s=this,t.label=2;case 2:return 0<e?[5,n()]:[3,4];case 3:return"break"===t.sent()?[3,4]:[3,2];case 4:return[2]}})})},T.prototype.kt=function(){var t=this;return new Promise(function(r,e){return R(t,void 0,void 0,function(){var n,i=this;return x(this,function(t){return n=function(){return R(i,void 0,void 0,function(){return x(this,function(t){switch(t.label){case 0:return[4,this.Tt()];case 1:return t.sent(),[2]}})})},this.At.pushTask(n,[],function(){r()},function(t){e(t)},function(){0<i.At.size()&&i.At.runATask()}),this.dbOpened&&1===this.At.size()&&this.At.runATask(),[2]})})})},T.prototype.Ut=function(){var t=this;return new Promise(function(r,e){return R(t,void 0,void 0,function(){var n,i=this;return x(this,function(t){return this.Nt=!1,this.Dt=!0,n=function(){return R(i,void 0,void 0,function(){return x(this,function(t){switch(t.label){case 0:return this.Dt=!0,[4,this.Tt()];case 1:return t.sent(),[2]}})})},this.At.pushTask(n,[],function(){i.Nt=!0,i.Dt=!1,r()},function(t){i.Dt=!1,e(t)},function(){0<i.At.size()&&i.At.runATask()}),this.dbOpened&&1===this.At.size()&&this.At.runATask(),[2]})})})},T.prototype.setUploadUrl=function(t){this.Zt.setUploadUrl(t)},T.prototype.startUpload=function(){return R(this,void 0,void 0,function(){return x(this,function(t){switch(t.label){case 0:if(!this.Ot)throw new Error("zip logs upload is not enabled.");if(0!==this.It&&performance.now()-this.It<6e4&&this.Nt||this.Dt)throw new Error("Logs upload failed. Do not report frequently.");return this.It=performance.now(),[4,this.Ut()];case 1:return t.sent(),[2]}})})},T.prototype.destroy=function(){this.N.clear()},T);function T(t,n){this.T=t,this.proxyCtrl=n,this.Y=new le,this.gt=new ce(this.Y),this.bt=!1,this.yt=!1,this.N=new be,this.xt=!1,this.Et=new ge,this.At=new ge,this.Ot=!1,this.It=0,this.Nt=!1,this.Dt=!1,this.Zt=new je(this.T,n),this.Rt=new De(this.T)}var Fe=function(){return(Fe=Object.assign||function(t){for(var n,i=1,r=arguments.length;i<r;i++)for(var e in n=arguments[i])Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t}).apply(this,arguments)},Pe=function(t,s,u,f){return new(u=u||Promise)(function(i,n){function r(t){try{o(f.next(t))}catch(t){n(t)}}function e(t){try{o(f.throw(t))}catch(t){n(t)}}function o(t){var n;t.done?i(t.value):((n=t.value)instanceof u?n:new u(function(t){t(n)})).then(r,e)}o((f=f.apply(t,s||[])).next())})},Me=function(r,e){var o,s,u,f={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]},c={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function t(i){return function(t){var n=[i,t];if(o)throw new TypeError("Generator is already executing.");for(;f=c&&n[c=0]?0:f;)try{if(o=1,s&&(u=2&n[0]?s.return:n[0]?s.throw||((u=s.return)&&u.call(s),0):s.next)&&!(u=u.call(s,n[1])).done)return u;switch(s=0,(n=u?[2&n[0],u.value]:n)[0]){case 0:case 1:u=n;break;case 4:return f.label++,{value:n[1],done:!1};case 5:f.label++,s=n[1],n=[0];continue;case 7:n=f.ops.pop(),f.trys.pop();continue;default:if(!(u=0<(u=f.trys).length&&u[u.length-1])&&(6===n[0]||2===n[0])){f=0;continue}if(3===n[0]&&(!u||n[1]>u[0]&&n[1]<u[3]))f.label=n[1];else if(6===n[0]&&f.label<u[1])f.label=u[1],u=n;else{if(!(u&&f.label<u[2])){u[2]&&f.ops.pop(),f.trys.pop();continue}f.label=u[2],f.ops.push(n)}}n=e.call(r,f)}catch(t){n=[6,t],s=0}finally{o=u=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}}};Object.defineProperty(Z.prototype,"backURL",{get:function(){return this.T.bakURL||""},set:function(t){this.T.bakURL=t},enumerable:!1,configurable:!0}),Object.defineProperty(Z.prototype,"url",{get:function(){return this.T.url||""},set:function(t){this.T.url=t},enumerable:!1,configurable:!0}),Object.defineProperty(Z.prototype,"logType",{get:function(){return this.T.logType||e.DISABLE},set:function(t){this.T.logType=t},enumerable:!1,configurable:!0}),Object.defineProperty(Z.prototype,"env",{get:function(){return this.T.env},set:function(t){this.T.env=t},enumerable:!1,configurable:!0}),Object.defineProperty(Z.prototype,"appid",{get:function(){return this.T.appid},set:function(t){this.T.appid=t},enumerable:!1,configurable:!0}),Object.defineProperty(Z.prototype,"roomid",{get:function(){return this.T.roomid},set:function(t){this.T.roomid=t},enumerable:!1,configurable:!0}),Object.defineProperty(Z.prototype,"sessionid",{get:function(){return this.T.sessionid},set:function(t){this.T.sessionid=t},enumerable:!1,configurable:!0}),Object.defineProperty(Z.prototype,"userid",{get:function(){return this.T.userid},set:function(t){this.T.userid=t},enumerable:!1,configurable:!0}),Object.defineProperty(Z.prototype,"version",{get:function(){return this.T.version},set:function(t){this.T.version=t},enumerable:!1,configurable:!0}),Z.prototype.setLogLevel=function(t){t=s[t];return void 0!==t&&(this.logLevel=t,!0)},Z.prototype.setRemoteLogLevel=function(t){t=s[t];return void 0!==t&&(this.logRemoteLevel=t,!0)},Z.prototype.setSessionInfo=function(t,n,i,r,e,o){this.appid=t,this.roomid=n,this.sessionid=i,this.userid=r,this.version=o},Z.prototype.setTokenInfo=function(t,n){this.T.token=t||"",n&&(this.T.userid=n)},Z.prototype.setZipLogConfig=function(t,n){1===t&&this.Lt?this.Lt.enable():0==t&&n&&this.Lt&&(this.Lt.destroy(),this.Lt=null)},Z.prototype.setZipLogUploadUrl=function(t){this.Lt&&this.Lt.setUploadUrl(t)},Z.prototype.makeZipLogSpaceUpload=function(){return Pe(this,void 0,void 0,function(){return Me(this,function(t){switch(t.label){case 0:return this.Lt?[4,this.Lt.makeStorageSpaceUpload()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},Z.prototype.uploadStorageLog=function(){return Pe(this,void 0,void 0,function(){return Me(this,function(t){switch(t.label){case 0:return this.Lt?[4,this.Lt.startUpload()]:[3,2];case 1:return t.sent(),[3,3];case 2:throw new Error("cannot use zip log module");case 3:return[2]}})})},Z.prototype.report=function(t){t=this.Ft(s.REPORT,t);this.logLevel!==s.DISABLE&&this.logLevel<=s.REPORT&&!this.isDestroy&&console.debug(t),this.Pt(s.REPORT,t,!0)},Z.prototype.debug=function(t,n){var i={},n=("string"==typeof(n=void 0===n?{}:n)?t=Array.from(arguments).join(""):i=n,this.Mt(s.DEBUG,t,i));this.logLevel!==s.DISABLE&&this.logLevel<=s.DEBUG&&!this.isDestroy&&console.debug(n),this.zt(s.DEBUG,n)},Z.prototype.info=function(t,n){var i={},n=("string"==typeof(n=void 0===n?{}:n)?t=Array.from(arguments).join(""):i=n,this.Mt(s.INFO,t,i));this.logLevel!==s.DISABLE&&this.logLevel<=s.INFO&&!this.isDestroy&&console.info(n),this.zt(s.INFO,n)},Z.prototype.warn=function(t,n){var i={},n=("string"==typeof(n=void 0===n?{}:n)?t=Array.from(arguments).join(""):i=n,this.Mt(s.WARN,t,i));this.logLevel!==s.DISABLE&&this.logLevel<=s.WARN&&!this.isDestroy&&console.warn(n),this.zt(s.WARN,n)},Z.prototype.remoteReport=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=this.Mt(s.INFO,t.join(""));this.zt(s.INFO,i)},Z.prototype.error=function(t,n){var i={},n=("string"==typeof(n=void 0===n?{}:n)?t=Array.from(arguments).join(""):i=n,this.Mt(s.ERROR,t,i));this.logLevel!==s.DISABLE&&this.logLevel<=s.ERROR&&!this.isDestroy&&(console.error(n),this.env%2===o.BROWSER&&window?this.stateCenter.debug&&window.alert(t.substr(t.indexOf(" ")+1,4500)):(this.env,o.WEIXINMINI)),this.zt(s.ERROR,n)},Z.prototype.zt=function(t,n){this.logRemoteLevel!==s.DISABLE&&this.logRemoteLevel<=t&&(this.Pt(t,n),this.Lt)&&this.Lt.saveLog(n)},Z.prototype.setLogServer=function(t,n){if(this.isDestroy)return!1;this.url!==t&&(this.logConnected=!1);try{return t.startsWith("wss:")?(this.logType=e.WEBSOCKET,this.Ct.openWebSocketLogServer(t,!0)):t.startsWith("https:")?(this.logType=e.HTTPS,this.Ht(t,n)):this.logType=e.DISABLE,!0}catch(t){return this.error(JSON.stringify(t)),!1}},Z.prototype.Bt=function(){this.logType==e.WEBSOCKET?this.qt():this.logType==e.HTTPS&&(this.Jt(),this.Gt()),this.logType=e.DISABLE},Z.prototype.qt=function(){this.Ct.stopWebSocketServer()},Z.prototype.Ht=function(t,n){var i,r=this;this.url=t,null!=(i=null==n?void 0:n.bakURL)&&i.startsWith("https://")&&(this.backURL=n.bakURL),t&&(this.Gt(),this.logUploadTimer||(this.logUploadTimer=setInterval(function(){r.Jt()},this.logUploadInterval)))},Z.prototype.Gt=function(){this.logUploadTimer&&(clearInterval(this.logUploadTimer),this.logUploadTimer=null)},Z.prototype.Pt=function(n,i,r){return void 0===r&&(r=!1),Pe(this,void 0,void 0,function(){return Me(this,function(t){if(!this.isDestroy)if(this.logType==e.WEBSOCKET)this.Kt(n,i);else if(this.logType==e.HTTPS)this.Wt(n,i,r);else if(this.logLevel!==s.DISABLE&&this.logLevel<=n){if(4e3<i.length)return[2];for(this.Xt.push(i);this.Xt.size()>this.$t;)this.Xt.pop()}return[2]})})},Z.prototype.clearCache=function(){0!==this.Xt.size()&&this.Ct.clearLogCacheAndUpload()},Z.prototype.Kt=function(e,n){return Pe(this,void 0,void 0,function(){var i,r=this;return Me(this,function(t){return"string"==typeof n&&4e3<n.length?((t,n)=>{void 0===n&&(n=2e3);for(var i=[],r=0;r<t.length;)i.push(t.substring(r,r+n)),r+=n;return i})((i=JSON.parse(n)).content,3e3).forEach(function(t,n){3<n||(i.content="s".concat(n+1,": ").concat(t),r.Kt(e,JSON.stringify(i)))}):this.T.useStrategy&&this.env==o.BROWSER&&this.Ct.addRemoteWsLog(n),[2]})})},Z.prototype.Wt=function(t,n,i){this.Xt.push(n),(this.Xt.size()>=this.$t||!0===i)&&this.Jt()},Z.prototype.Mt=function(t,n,i){void 0===i&&(i={});var r=H(),n=[n.substr(0,n.indexOf(" "))||n,n.substr(n.indexOf(" ")+1,8e3)||n],e=n[0],n=n[1],i=Fe(Fe({},i),{time:r,level:t,action:e,content:n,appid:this.appid,roomid:this.roomid||void 0,userid:this.userid,sessionid:this.sessionid||void 0});return JSON.stringify(i)},Z.prototype.Ft=function(t,n){var i=H(),r="",r=this.env%2===o.BROWSER?"rtc":"ali";return n=Fe(Fe({},n),{time:i,level:t,console:r,appid:this.appid,room_id:this.roomid,roomid:this.roomid,userid:this.userid,id_name:this.userid,sessionid:this.sessionid,sdk_version:this.version,test_environment:this.stateCenter.testEnvironment,version:this.version,event_id:this.appid+"_"+this.userid+"_"+n.event_time+"_"+n.seq}),JSON.stringify(n)},Z.prototype.Jt=function(){0!=this.Xt.size()&&(this.env%2===o.BROWSER?this.Yt():this.SendHttpsLogWeChatMini())},Z.prototype.Yt=function(){var n=this,t=this.Xt.buffer.join("\n"),i=this.Xt.buffer,r=new XMLHttpRequest;r.onreadystatechange=function(){if(4==r.readyState){if(200==r.status){if(n.logConnected=!0,0==r.responseText.length)return;try{var t=JSON.parse(r.responseText).interval;"number"==typeof t&&n.logUploadInterval!==t&&(n.timeInterval=t,n.Ht(n.url))}catch(t){n.Xt.buffer=i.concat(n.Xt.buffer),console.log("send result failed "+t)}}else n.Xt.buffer=i.concat(n.Xt.buffer);i=null}},r.open("POST",this.url,!0),0==this.env?r.send(t):1==this.env&&(r.setRequestHeader("content-type","application/json"),r.send(JSON.stringify({user_id:this.userid,log:t}))),this.Xt.buffer=[]},Z.prototype.SendHttpsLogWeChatMini=function(){},Z.prototype.destroy=function(){this.Bt(),this.logUploadTimer&&clearTimeout(this.logUploadTimer),D.instance=void 0,this.Ct.destroy(),this.Lt&&this.Lt.destroy(),this.url="",this.isDestroy=!0},Z.logVersion="1.4.12";var ze=Z;function Z(t,n){var i=this;this.proxyCtrl=n,this.logLevel=s.INFO,this.logRemoteLevel=0,this.logUploadTimer=null,this.logUploadInterval=1e4,this.existUserID=!1,this.isDestroy=!1,this.$t=8192,this.M={debug:this.debug.bind(this),info:this.info.bind(this),warn:this.warn.bind(this),error:this.error.bind(this)},this.logConnected=!1,this.inflate=mr,this.deflate=_r,this.stateCenter=D.getInstance(),this.T=new te,this.T.env=t,this.Xt=new oe(this.T,this.$t),this.Ct=new jr(this.Xt,this.T,this.M,this.proxyCtrl),this.Ct.onSocketConnect=function(){i.logConnected=!0},this.env==o.BROWSER&&Le.isEnvSupport()&&(this.Lt=new Le(this.T,this.proxyCtrl))}}],s={},e.m=o,e.c=s,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:i})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"Vt",{value:!0})},e.t=function(n,t){if(1&t&&(n=e(n)),8&t)return n;if(4&t&&"object"==typeof n&&n&&n.Vt)return n;var i=Object.create(null);if(e.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:n}),2&t&&"string"!=typeof n)for(var r in n)e.d(i,r,function(t){return n[t]}.bind(null,r));return i},e.n=function(t){var n=t&&t.Vt?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=3);function e(t){var n;return(s[t]||(n=s[t]={i:t,l:!1,exports:{}},o[t].call(n.exports,n,n.exports,e),n.l=!0,n)).exports}var o,s});